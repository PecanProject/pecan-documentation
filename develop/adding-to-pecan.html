<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>18 Adding to PEcAn | The Predictive Ecosystem Analyzer</title>
  <meta name="description" content="18 Adding to PEcAn | The Predictive Ecosystem Analyzer" />
  <meta name="generator" content="bookdown 0.17 and GitBook 2.6.7" />

  <meta property="og:title" content="18 Adding to PEcAn | The Predictive Ecosystem Analyzer" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="18 Adding to PEcAn | The Predictive Ecosystem Analyzer" />
  
  
  

<meta name="author" content="By: PEcAn Team" />


<meta name="date" content="2020-01-28" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="shiny.html"/>
<link rel="next" href="troubleshooting-and-debugging-pecan.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.1/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.10/datatables.js"></script>
<link href="libs/dt-core-1.10.19/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.10.19/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.10.19/js/jquery.dataTables.min.js"></script>
<link href="libs/dt-ext-fixedcolumns-1.10.19/css/fixedColumns.dataTables.min.css" rel="stylesheet" />
<script src="libs/dt-ext-fixedcolumns-1.10.19/js/dataTables.fixedColumns.min.js"></script>
<script src="libs/jszip-1.10.19/jszip.min.js"></script>
<script src="libs/pdfmake-1.10.19/pdfmake.min.js"></script>
<script src="libs/pdfmake-1.10.19/vfs_fonts.js"></script>
<link href="libs/dt-ext-buttons-1.10.19/css/buttons.dataTables.min.css" rel="stylesheet" />
<script src="libs/dt-ext-buttons-1.10.19/js/dataTables.buttons.min.js"></script>
<script src="libs/dt-ext-buttons-1.10.19/js/buttons.flash.min.js"></script>
<script src="libs/dt-ext-buttons-1.10.19/js/buttons.html5.min.js"></script>
<script src="libs/dt-ext-buttons-1.10.19/js/buttons.colVis.min.js"></script>
<script src="libs/dt-ext-buttons-1.10.19/js/buttons.print.min.js"></script>
<link href="libs/crosstalk-1.0.0/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.0.0/js/crosstalk.min.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a></li>
<li class="part"><span><b>I Introduction</b></span></li>
<li class="chapter" data-level="1" data-path="project-overview.html"><a href="project-overview.html"><i class="fa fa-check"></i><b>1</b> Project Overview</a></li>
<li class="chapter" data-level="2" data-path="contributor-covenant-code-of-conduct.html"><a href="contributor-covenant-code-of-conduct.html"><i class="fa fa-check"></i><b>2</b> Contributor Covenant Code of Conduct</a></li>
<li class="chapter" data-level="3" data-path="about-the-pecan-book.html"><a href="about-the-pecan-book.html"><i class="fa fa-check"></i><b>3</b> About the PEcAn Book</a><ul>
<li class="chapter" data-level="3.1" data-path="about-the-pecan-book.html"><a href="about-the-pecan-book.html#general-feedbackcommentssuggestions"><i class="fa fa-check"></i><b>3.1</b> General Feedback/Comments/Suggestions</a></li>
<li class="chapter" data-level="3.2" data-path="about-the-pecan-book.html"><a href="about-the-pecan-book.html#bookediting"><i class="fa fa-check"></i><b>3.2</b> Editing this book</a></li>
<li class="chapter" data-level="3.3" data-path="about-the-pecan-book.html"><a href="about-the-pecan-book.html#how-to-create-your-own-version-of-documentation"><i class="fa fa-check"></i><b>3.3</b> How to create your own version of Documentation</a></li>
</ul></li>
<li class="part"><span><b>II Tutorials, Demos and How To’s</b></span></li>
<li class="chapter" data-level="4" data-path="pecan-manual-setup.html"><a href="pecan-manual-setup.html"><i class="fa fa-check"></i><b>4</b> Install PEcAn</a><ul>
<li class="chapter" data-level="4.1" data-path="pecan-manual-setup.html"><a href="pecan-manual-setup.html#install-vm"><i class="fa fa-check"></i><b>4.1</b> Virtual Machine (VM)</a></li>
<li class="chapter" data-level="4.2" data-path="pecan-manual-setup.html"><a href="pecan-manual-setup.html#install-docker"><i class="fa fa-check"></i><b>4.2</b> Docker</a></li>
<li class="chapter" data-level="4.3" data-path="pecan-manual-setup.html"><a href="pecan-manual-setup.html#install-native"><i class="fa fa-check"></i><b>4.3</b> (Advanced) Native install</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="user-section.html"><a href="user-section.html"><i class="fa fa-check"></i><b>5</b> Tutorials</a><ul>
<li class="chapter" data-level="5.1" data-path="user-section.html"><a href="user-section.html#pecan-in-a-nutshell"><i class="fa fa-check"></i><b>5.1</b> How PEcAn Works in a nutshell</a></li>
<li class="chapter" data-level="5.2" data-path="user-section.html"><a href="user-section.html#demo-table"><i class="fa fa-check"></i><b>5.2</b> PEcAn Demos</a></li>
<li class="chapter" data-level="5.3" data-path="user-section.html"><a href="user-section.html#demo-01-basic-run-pecan"><i class="fa fa-check"></i><b>5.3</b> Demo 01: Basic Run PEcAn</a></li>
<li class="chapter" data-level="5.4" data-path="user-section.html"><a href="user-section.html#demo-02-sensitivity-and-uncertainty-analysis"><i class="fa fa-check"></i><b>5.4</b> Demo 02: Sensitivity and Uncertainty Analysis</a></li>
<li class="chapter" data-level="5.5" data-path="user-section.html"><a href="user-section.html#othervignettes"><i class="fa fa-check"></i><b>5.5</b> Other Vignettes</a><ul>
<li class="chapter" data-level="5.5.1" data-path="user-section.html"><a href="user-section.html#simple-model-data-comparisons"><i class="fa fa-check"></i><b>5.5.1</b> Simple Model-Data Comparisons</a></li>
<li class="chapter" data-level="5.5.2" data-path="user-section.html"><a href="user-section.html#data-assimilation-concepts"><i class="fa fa-check"></i><b>5.5.2</b> Data Assimilation Concepts</a></li>
<li class="chapter" data-level="5.5.3" data-path="user-section.html"><a href="user-section.html#parameter-data-assimilation"><i class="fa fa-check"></i><b>5.5.3</b> Parameter Data Assimilation</a></li>
<li class="chapter" data-level="5.5.4" data-path="user-section.html"><a href="user-section.html#state-variable-data-assimilation"><i class="fa fa-check"></i><b>5.5.4</b> State-Variable Data Assimilation</a></li>
<li class="chapter" data-level="5.5.5" data-path="user-section.html"><a href="user-section.html#pecan-testing-the-sensitivity-analysis-against-observations"><i class="fa fa-check"></i><b>5.5.5</b> PEcAn: Testing the Sensitivity Analysis Against Observations&quot;</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="user-section.html"><a href="user-section.html#advanced-user"><i class="fa fa-check"></i><b>5.6</b> Advanced User Guide</a><ul>
<li class="chapter" data-level="5.6.1" data-path="user-section.html"><a href="user-section.html#web-curl-submission"><i class="fa fa-check"></i><b>5.6.1</b> Submitting Workflow from Command Line</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="basic-web-workflow.html"><a href="basic-web-workflow.html"><i class="fa fa-check"></i><b>6</b> Basic Web workflow</a><ul>
<li class="chapter" data-level="6.1" data-path="basic-web-workflow.html"><a href="basic-web-workflow.html#web-site-model"><i class="fa fa-check"></i><b>6.1</b> Site and model selection</a><ul>
<li class="chapter" data-level="6.1.1" data-path="basic-web-workflow.html"><a href="basic-web-workflow.html#selecting-a-model"><i class="fa fa-check"></i><b>6.1.1</b> Selecting a model</a></li>
<li class="chapter" data-level="6.1.2" data-path="basic-web-workflow.html"><a href="basic-web-workflow.html#selecting-a-site"><i class="fa fa-check"></i><b>6.1.2</b> Selecting a site</a></li>
<li class="chapter" data-level="6.1.3" data-path="basic-web-workflow.html"><a href="basic-web-workflow.html#site-groups"><i class="fa fa-check"></i><b>6.1.3</b> Site Groups</a></li>
<li class="chapter" data-level="6.1.4" data-path="basic-web-workflow.html"><a href="basic-web-workflow.html#using-existing-sites"><i class="fa fa-check"></i><b>6.1.4</b> Using existing sites</a></li>
<li class="chapter" data-level="6.1.5" data-path="basic-web-workflow.html"><a href="basic-web-workflow.html#adding-a-new-site"><i class="fa fa-check"></i><b>6.1.5</b> Adding a new site</a></li>
<li class="chapter" data-level="6.1.6" data-path="basic-web-workflow.html"><a href="basic-web-workflow.html#troubleshooting"><i class="fa fa-check"></i><b>6.1.6</b> Troubleshooting</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="basic-web-workflow.html"><a href="basic-web-workflow.html#web-model-config"><i class="fa fa-check"></i><b>6.2</b> Model configuration</a><ul>
<li class="chapter" data-level="6.2.1" data-path="basic-web-workflow.html"><a href="basic-web-workflow.html#choosing-meteorology"><i class="fa fa-check"></i><b>6.2.1</b> Choosing meteorology</a></li>
<li class="chapter" data-level="6.2.2" data-path="basic-web-workflow.html"><a href="basic-web-workflow.html#met-workflow"><i class="fa fa-check"></i><b>6.2.2</b> Met workflow</a></li>
<li class="chapter" data-level="6.2.3" data-path="basic-web-workflow.html"><a href="basic-web-workflow.html#troubleshooting-meteorological-conversions"><i class="fa fa-check"></i><b>6.2.3</b> Troubleshooting meteorological conversions</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="basic-web-workflow.html"><a href="basic-web-workflow.html#selecting-plant-functional-types-pfts-and-other-parameter-groupings."><i class="fa fa-check"></i><b>6.3</b> Selecting Plant Functional Types (PFTs) and other parameter groupings.</a><ul>
<li class="chapter" data-level="6.3.1" data-path="basic-web-workflow.html"><a href="basic-web-workflow.html#using-existing-pfts"><i class="fa fa-check"></i><b>6.3.1</b> Using existing PFTs</a></li>
<li class="chapter" data-level="6.3.2" data-path="basic-web-workflow.html"><a href="basic-web-workflow.html#creating-new-pfts"><i class="fa fa-check"></i><b>6.3.2</b> Creating new PFTs</a></li>
<li class="chapter" data-level="6.3.3" data-path="basic-web-workflow.html"><a href="basic-web-workflow.html#choosing-initial-vegetation"><i class="fa fa-check"></i><b>6.3.3</b> Choosing initial vegetation</a></li>
<li class="chapter" data-level="6.3.4" data-path="basic-web-workflow.html"><a href="basic-web-workflow.html#us-fia"><i class="fa fa-check"></i><b>6.3.4</b> US FIA</a></li>
<li class="chapter" data-level="6.3.5" data-path="basic-web-workflow.html"><a href="basic-web-workflow.html#spin-up"><i class="fa fa-check"></i><b>6.3.5</b> Spin up</a></li>
<li class="chapter" data-level="6.3.6" data-path="basic-web-workflow.html"><a href="basic-web-workflow.html#selecting-a-soils-product"><i class="fa fa-check"></i><b>6.3.6</b> Selecting a soils product</a></li>
<li class="chapter" data-level="6.3.7" data-path="basic-web-workflow.html"><a href="basic-web-workflow.html#soil-texture-depth-and-physical-parameters"><i class="fa fa-check"></i><b>6.3.7</b> Soil texture, depth, and physical parameters</a></li>
<li class="chapter" data-level="6.3.8" data-path="basic-web-workflow.html"><a href="basic-web-workflow.html#other-model-inputs"><i class="fa fa-check"></i><b>6.3.8</b> Other model inputs</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="intermediate-user.html"><a href="intermediate-user.html"><i class="fa fa-check"></i><b>7</b> More on the PEcAn Web Interface</a><ul>
<li class="chapter" data-level="7.1" data-path="intermediate-user.html"><a href="intermediate-user.html#additional-web-configuration"><i class="fa fa-check"></i><b>7.1</b> Additional web configuration</a><ul>
<li class="chapter" data-level="7.1.1" data-path="intermediate-user.html"><a href="intermediate-user.html#intermediate-web-setup"><i class="fa fa-check"></i><b>7.1.1</b> Web interface setup</a></li>
<li class="chapter" data-level="7.1.2" data-path="intermediate-user.html"><a href="intermediate-user.html#browndog"><i class="fa fa-check"></i><b>7.1.2</b> Brown Dog</a></li>
<li class="chapter" data-level="7.1.3" data-path="intermediate-user.html"><a href="intermediate-user.html#intermediate-advanced-setup"><i class="fa fa-check"></i><b>7.1.3</b> Advanced Setup</a></li>
<li class="chapter" data-level="7.1.4" data-path="intermediate-user.html"><a href="intermediate-user.html#intermediate-model-config"><i class="fa fa-check"></i><b>7.1.4</b> Editing model configurations</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="intermediate-user.html"><a href="intermediate-user.html#settings-configured-analyses"><i class="fa fa-check"></i><b>7.2</b> Settings-configured analyses</a><ul>
<li class="chapter" data-level="7.2.1" data-path="intermediate-user.html"><a href="intermediate-user.html#pda"><i class="fa fa-check"></i><b>7.2.1</b> Parameter data assimilation (PDA)</a></li>
<li class="chapter" data-level="7.2.2" data-path="intermediate-user.html"><a href="intermediate-user.html#sda"><i class="fa fa-check"></i><b>7.2.2</b> State data assimilation (SDA)</a></li>
<li class="chapter" data-level="7.2.3" data-path="intermediate-user.html"><a href="intermediate-user.html#running-sda-on-remote"><i class="fa fa-check"></i><b>7.2.3</b> Running SDA on remote</a></li>
<li class="chapter" data-level="7.2.4" data-path="intermediate-user.html"><a href="intermediate-user.html#restart-functionality-in-sda"><i class="fa fa-check"></i><b>7.2.4</b> Restart functionality in SDA</a></li>
<li class="chapter" data-level="7.2.5" data-path="intermediate-user.html"><a href="intermediate-user.html#state-data-assimilation-methods"><i class="fa fa-check"></i><b>7.2.5</b> State Data Assimilation Methods</a></li>
<li class="chapter" data-level="7.2.6" data-path="intermediate-user.html"><a href="intermediate-user.html#multisettings"><i class="fa fa-check"></i><b>7.2.6</b> MultiSettings</a></li>
<li class="chapter" data-level="7.2.7" data-path="intermediate-user.html"><a href="intermediate-user.html#benchmarking"><i class="fa fa-check"></i><b>7.2.7</b> Benchmarking</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="developer-guide.html"><a href="developer-guide.html"><i class="fa fa-check"></i><b>8</b> Developer guide</a><ul>
<li class="chapter" data-level="8.1" data-path="developer-guide.html"><a href="developer-guide.html#updatebety"><i class="fa fa-check"></i><b>8.1</b> Updating PEcAn Code and Bety Database</a><ul>
<li class="chapter" data-level="8.1.1" data-path="developer-guide.html"><a href="developer-guide.html#pecan-make"><i class="fa fa-check"></i><b>8.1.1</b> Updating PEcAn</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="developer-guide.html"><a href="developer-guide.html#pecan-git"><i class="fa fa-check"></i><b>8.2</b> Git and GitHub Workflow</a><ul>
<li class="chapter" data-level="8.2.1" data-path="developer-guide.html"><a href="developer-guide.html#using-git"><i class="fa fa-check"></i><b>8.2.1</b> Using Git</a></li>
<li class="chapter" data-level="8.2.2" data-path="developer-guide.html"><a href="developer-guide.html#github-use-with-pecan"><i class="fa fa-check"></i><b>8.2.2</b> GitHub use with PEcAn</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="developer-guide.html"><a href="developer-guide.html#coding-practices"><i class="fa fa-check"></i><b>8.3</b> Coding Practices</a><ul>
<li class="chapter" data-level="8.3.1" data-path="developer-guide.html"><a href="developer-guide.html#developer-codestyle"><i class="fa fa-check"></i><b>8.3.1</b> Coding Style</a></li>
<li class="chapter" data-level="8.3.2" data-path="developer-guide.html"><a href="developer-guide.html#developer-logging"><i class="fa fa-check"></i><b>8.3.2</b> Logging</a></li>
<li class="chapter" data-level="8.3.3" data-path="developer-guide.html"><a href="developer-guide.html#developer-packagedata"><i class="fa fa-check"></i><b>8.3.3</b> Package Data</a></li>
<li class="chapter" data-level="8.3.4" data-path="developer-guide.html"><a href="developer-guide.html#developer-roxygen"><i class="fa fa-check"></i><b>8.3.4</b> Documenting functions using <code>roxygen2</code></a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="developer-guide.html"><a href="developer-guide.html#developer-testing"><i class="fa fa-check"></i><b>8.4</b> Testing</a><ul>
<li class="chapter" data-level="8.4.1" data-path="developer-guide.html"><a href="developer-guide.html#developer-testing-unit"><i class="fa fa-check"></i><b>8.4.1</b> Unit testing</a></li>
<li class="chapter" data-level="8.4.2" data-path="developer-guide.html"><a href="developer-guide.html#developer-testing-integration"><i class="fa fa-check"></i><b>8.4.2</b> Integration testing</a></li>
<li class="chapter" data-level="8.4.3" data-path="developer-guide.html"><a href="developer-guide.html#continuous-integration"><i class="fa fa-check"></i><b>8.4.3</b> Continuous Integration</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="developer-guide.html"><a href="developer-guide.html#download-and-compile-pecan"><i class="fa fa-check"></i><b>8.5</b> Download and Compile PEcAn</a><ul>
<li class="chapter" data-level="8.5.1" data-path="developer-guide.html"><a href="developer-guide.html#download-compile-and-install-pecan-from-github"><i class="fa fa-check"></i><b>8.5.1</b> Download, compile and install PEcAn from GitHub</a></li>
<li class="chapter" data-level="8.5.2" data-path="developer-guide.html"><a href="developer-guide.html#pecan-testrun"><i class="fa fa-check"></i><b>8.5.2</b> PEcAn Testrun</a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="developer-guide.html"><a href="developer-guide.html#directory-structure"><i class="fa fa-check"></i><b>8.6</b> Directory structure</a><ul>
<li class="chapter" data-level="8.6.1" data-path="developer-guide.html"><a href="developer-guide.html#overview-of-pecan-repository-as-of-pecan-1.5.3"><i class="fa fa-check"></i><b>8.6.1</b> Overview of PEcAn repository as of PEcAn 1.5.3</a></li>
<li class="chapter" data-level="8.6.2" data-path="developer-guide.html"><a href="developer-guide.html#generic-r-package-structure"><i class="fa fa-check"></i><b>8.6.2</b> Generic R package structure:</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>III Topical Pages</b></span></li>
<li class="chapter" data-level="9" data-path="working-with-vm.html"><a href="working-with-vm.html"><i class="fa fa-check"></i><b>9</b> VM configuration and maintenance</a><ul>
<li class="chapter" data-level="9.1" data-path="working-with-vm.html"><a href="working-with-vm.html#maintain-vm"><i class="fa fa-check"></i><b>9.1</b> Updating the VM</a></li>
<li class="chapter" data-level="9.2" data-path="working-with-vm.html"><a href="working-with-vm.html#ssh-vm"><i class="fa fa-check"></i><b>9.2</b> Connecting to the VM via SSH</a></li>
<li class="chapter" data-level="9.3" data-path="working-with-vm.html"><a href="working-with-vm.html#ssh-vm-bety"><i class="fa fa-check"></i><b>9.3</b> Connecting to bety on the VM via SSh</a><ul>
<li class="chapter" data-level="9.3.1" data-path="working-with-vm.html"><a href="working-with-vm.html#awsvm"><i class="fa fa-check"></i><b>9.3.1</b> Using Amazon Web Services for a VM (AWS)</a></li>
<li class="chapter" data-level="9.3.2" data-path="working-with-vm.html"><a href="working-with-vm.html#createvm"><i class="fa fa-check"></i><b>9.3.2</b> Creating a Virtual Machine</a></li>
<li class="chapter" data-level="9.3.3" data-path="working-with-vm.html"><a href="working-with-vm.html#vm-dektop-conversion"><i class="fa fa-check"></i><b>9.3.3</b> VM Desktop Conversion</a></li>
<li class="chapter" data-level="9.3.4" data-path="working-with-vm.html"><a href="working-with-vm.html#install-rstudio"><i class="fa fa-check"></i><b>9.3.4</b> Install RStudio Desktop</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="pecan-standards.html"><a href="pecan-standards.html"><i class="fa fa-check"></i><b>10</b> PEcAn standard formats</a><ul>
<li class="chapter" data-level="10.1" data-path="pecan-standards.html"><a href="pecan-standards.html#defining-new-input-formats"><i class="fa fa-check"></i><b>10.1</b> Defining new input formats</a></li>
<li class="chapter" data-level="10.2" data-path="pecan-standards.html"><a href="pecan-standards.html#time-standard"><i class="fa fa-check"></i><b>10.2</b> Time Standard</a><ul>
<li class="chapter" data-level="10.2.1" data-path="pecan-standards.html"><a href="pecan-standards.html#input-standards"><i class="fa fa-check"></i><b>10.2.1</b> Input Standards</a></li>
<li class="chapter" data-level="10.2.2" data-path="pecan-standards.html"><a href="pecan-standards.html#soils-and-vegetation-inputs"><i class="fa fa-check"></i><b>10.2.2</b> Soils and Vegetation Inputs</a></li>
<li class="chapter" data-level="10.2.3" data-path="pecan-standards.html"><a href="pecan-standards.html#output-standards"><i class="fa fa-check"></i><b>10.2.3</b> Output Standards</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="pecanXML.html"><a href="pecanXML.html"><i class="fa fa-check"></i><b>11</b> The PEcAn XML</a><ul>
<li class="chapter" data-level="11.0.1" data-path="pecanXML.html"><a href="pecanXML.html#xml-core-config"><i class="fa fa-check"></i><b>11.0.1</b> Core configuration</a></li>
<li class="chapter" data-level="11.0.2" data-path="pecanXML.html"><a href="pecanXML.html#xml-outdir"><i class="fa fa-check"></i><b>11.0.2</b> <code>outdir</code>: Output directory</a></li>
<li class="chapter" data-level="11.0.3" data-path="pecanXML.html"><a href="pecanXML.html#xml-database"><i class="fa fa-check"></i><b>11.0.3</b> <code>database</code>: PEcAn database settings</a></li>
<li class="chapter" data-level="11.0.4" data-path="pecanXML.html"><a href="pecanXML.html#xml-pft"><i class="fa fa-check"></i><b>11.0.4</b> <code>pft</code>: Plant functional type selection</a></li>
<li class="chapter" data-level="11.0.5" data-path="pecanXML.html"><a href="pecanXML.html#xml-meta-analysis"><i class="fa fa-check"></i><b>11.0.5</b> <code>meta.analysis</code>: Trait Meta Analysis</a></li>
<li class="chapter" data-level="11.0.6" data-path="pecanXML.html"><a href="pecanXML.html#xml-model"><i class="fa fa-check"></i><b>11.0.6</b> <code>model</code>: Model configuration</a></li>
<li class="chapter" data-level="11.0.7" data-path="pecanXML.html"><a href="pecanXML.html#xml-run"><i class="fa fa-check"></i><b>11.0.7</b> <code>run</code>: Run Setup</a></li>
<li class="chapter" data-level="11.0.8" data-path="pecanXML.html"><a href="pecanXML.html#xml-host"><i class="fa fa-check"></i><b>11.0.8</b> <code>host</code>: Host information for remote execution</a></li>
<li class="chapter" data-level="11.0.9" data-path="pecanXML.html"><a href="pecanXML.html#xml-advanced"><i class="fa fa-check"></i><b>11.0.9</b> Advanced features</a></li>
<li class="chapter" data-level="11.0.10" data-path="pecanXML.html"><a href="pecanXML.html#xml-ensemble"><i class="fa fa-check"></i><b>11.0.10</b> <code>ensemble</code>: Ensemble Runs</a></li>
<li class="chapter" data-level="11.0.11" data-path="pecanXML.html"><a href="pecanXML.html#xml-sensitivity-analysis"><i class="fa fa-check"></i><b>11.0.11</b> <code>sensitivity.analysis</code>: Sensitivity analysis</a></li>
<li class="chapter" data-level="11.0.12" data-path="pecanXML.html"><a href="pecanXML.html#xml-parameter-data-assimilation"><i class="fa fa-check"></i><b>11.0.12</b> Parameter Data Assimilation</a></li>
<li class="chapter" data-level="11.0.13" data-path="pecanXML.html"><a href="pecanXML.html#xml-multi-settings"><i class="fa fa-check"></i><b>11.0.13</b> Multi-Settings</a></li>
<li class="chapter" data-level="11.0.14" data-path="pecanXML.html"><a href="pecanXML.html#xml-state-data-assimilation"><i class="fa fa-check"></i><b>11.0.14</b> (experimental) State Data Assimilation</a></li>
<li class="chapter" data-level="11.0.15" data-path="pecanXML.html"><a href="pecanXML.html#xml-browndog"><i class="fa fa-check"></i><b>11.0.15</b> (experimental) Brown Dog</a></li>
<li class="chapter" data-level="11.0.16" data-path="pecanXML.html"><a href="pecanXML.html#xml-benchmarking"><i class="fa fa-check"></i><b>11.0.16</b> (experimental) Benchmarking</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="workflow.html"><a href="workflow.html"><i class="fa fa-check"></i><b>12</b> PEcAn workflow (web/workflow.R)</a><ul>
<li class="chapter" data-level="12.0.1" data-path="workflow.html"><a href="workflow.html#workflow-readsettings"><i class="fa fa-check"></i><b>12.0.1</b> Read Settings</a></li>
<li class="chapter" data-level="12.0.2" data-path="workflow.html"><a href="workflow.html#workflow-input"><i class="fa fa-check"></i><b>12.0.2</b> Input Conversions</a></li>
<li class="chapter" data-level="12.0.3" data-path="workflow.html"><a href="workflow.html#workflow-input-data"><i class="fa fa-check"></i><b>12.0.3</b> Input Data</a></li>
<li class="chapter" data-level="12.0.4" data-path="workflow.html"><a href="workflow.html#workflow-input-initial"><i class="fa fa-check"></i><b>12.0.4</b> Initial Conditions</a></li>
<li class="chapter" data-level="12.0.5" data-path="workflow.html"><a href="workflow.html#workflow-met"><i class="fa fa-check"></i><b>12.0.5</b> Meteorological Data</a></li>
<li class="chapter" data-level="12.0.6" data-path="workflow.html"><a href="workflow.html#workflow-met-standard"><i class="fa fa-check"></i><b>12.0.6</b> Converting raw data to PEcAn standard</a></li>
<li class="chapter" data-level="12.0.7" data-path="workflow.html"><a href="workflow.html#workflow-met-downscale"><i class="fa fa-check"></i><b>12.0.7</b> Downscaling and gapfilling (optional)</a></li>
<li class="chapter" data-level="12.0.8" data-path="workflow.html"><a href="workflow.html#workflow-met-model"><i class="fa fa-check"></i><b>12.0.8</b> Converting from PEcAn standard to model-specific format</a></li>
<li class="chapter" data-level="12.0.9" data-path="workflow.html"><a href="workflow.html#workflow-traits"><i class="fa fa-check"></i><b>12.0.9</b> Traits</a></li>
<li class="chapter" data-level="12.0.10" data-path="workflow.html"><a href="workflow.html#workflow-metaanalysis"><i class="fa fa-check"></i><b>12.0.10</b> Meta Analysis</a></li>
<li class="chapter" data-level="12.0.11" data-path="workflow.html"><a href="workflow.html#workflow-modelconfig"><i class="fa fa-check"></i><b>12.0.11</b> Model Configuration</a></li>
<li class="chapter" data-level="12.0.12" data-path="workflow.html"><a href="workflow.html#workflow-modelrun"><i class="fa fa-check"></i><b>12.0.12</b> Run Execution</a></li>
<li class="chapter" data-level="12.0.13" data-path="workflow.html"><a href="workflow.html#workflow-postrun"><i class="fa fa-check"></i><b>12.0.13</b> Post Run Analysis</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="pecan-models.html"><a href="pecan-models.html"><i class="fa fa-check"></i><b>13</b> PEcAn Models</a><ul>
<li class="chapter" data-level="13.0.1" data-path="pecan-models.html"><a href="pecan-models.html#models-biocro"><i class="fa fa-check"></i><b>13.0.1</b> BioCro</a></li>
<li class="chapter" data-level="13.0.2" data-path="pecan-models.html"><a href="pecan-models.html#introduction-1"><i class="fa fa-check"></i><b>13.0.2</b> Introduction</a></li>
<li class="chapter" data-level="13.0.3" data-path="pecan-models.html"><a href="pecan-models.html#pecan-configuration-file-additions"><i class="fa fa-check"></i><b>13.0.3</b> PEcAn configuration file additions</a></li>
<li class="chapter" data-level="13.0.4" data-path="pecan-models.html"><a href="pecan-models.html#model-specific-input-files"><i class="fa fa-check"></i><b>13.0.4</b> Model specific input files</a></li>
<li class="chapter" data-level="13.0.5" data-path="pecan-models.html"><a href="pecan-models.html#model-configuration-files"><i class="fa fa-check"></i><b>13.0.5</b> Model configuration files</a></li>
<li class="chapter" data-level="13.0.6" data-path="pecan-models.html"><a href="pecan-models.html#installation-notes"><i class="fa fa-check"></i><b>13.0.6</b> Installation notes</a></li>
<li class="chapter" data-level="13.0.7" data-path="pecan-models.html"><a href="pecan-models.html#models-clm"><i class="fa fa-check"></i><b>13.0.7</b> CLM</a></li>
<li class="chapter" data-level="13.0.8" data-path="pecan-models.html"><a href="pecan-models.html#models-dalec"><i class="fa fa-check"></i><b>13.0.8</b> DALEC</a></li>
<li class="chapter" data-level="13.0.9" data-path="pecan-models.html"><a href="pecan-models.html#models-ed"><i class="fa fa-check"></i><b>13.0.9</b> ED2</a></li>
<li class="chapter" data-level="13.0.10" data-path="pecan-models.html"><a href="pecan-models.html#models-gday"><i class="fa fa-check"></i><b>13.0.10</b> GDAY</a></li>
<li class="chapter" data-level="13.0.11" data-path="pecan-models.html"><a href="pecan-models.html#models-linkages"><i class="fa fa-check"></i><b>13.0.11</b> LINKAGES</a></li>
<li class="chapter" data-level="13.0.12" data-path="pecan-models.html"><a href="pecan-models.html#models-lpjguess"><i class="fa fa-check"></i><b>13.0.12</b> LPJ-GUESS</a></li>
<li class="chapter" data-level="13.0.13" data-path="pecan-models.html"><a href="pecan-models.html#models-maespa"><i class="fa fa-check"></i><b>13.0.13</b> MAESPA</a></li>
<li class="chapter" data-level="13.0.14" data-path="pecan-models.html"><a href="pecan-models.html#models-preles"><i class="fa fa-check"></i><b>13.0.14</b> PRELES</a></li>
<li class="chapter" data-level="13.0.15" data-path="pecan-models.html"><a href="pecan-models.html#models-sipnet"><i class="fa fa-check"></i><b>13.0.15</b> SiPNET</a></li>
<li class="chapter" data-level="13.0.16" data-path="pecan-models.html"><a href="pecan-models.html#models-stics"><i class="fa fa-check"></i><b>13.0.16</b> STICS</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="available-meteorological-drivers.html"><a href="available-meteorological-drivers.html"><i class="fa fa-check"></i><b>14</b> Available Meteorological Drivers</a><ul>
<li class="chapter" data-level="14.0.1" data-path="available-meteorological-drivers.html"><a href="available-meteorological-drivers.html#ameriflux"><i class="fa fa-check"></i><b>14.0.1</b> Ameriflux</a></li>
<li class="chapter" data-level="14.0.2" data-path="available-meteorological-drivers.html"><a href="available-meteorological-drivers.html#amerifluxlbl"><i class="fa fa-check"></i><b>14.0.2</b> AmerifluxLBL</a></li>
<li class="chapter" data-level="14.0.3" data-path="available-meteorological-drivers.html"><a href="available-meteorological-drivers.html#fluxnet2015"><i class="fa fa-check"></i><b>14.0.3</b> Fluxnet2015</a></li>
<li class="chapter" data-level="14.0.4" data-path="available-meteorological-drivers.html"><a href="available-meteorological-drivers.html#narr"><i class="fa fa-check"></i><b>14.0.4</b> NARR</a></li>
<li class="chapter" data-level="14.0.5" data-path="available-meteorological-drivers.html"><a href="available-meteorological-drivers.html#cruncep"><i class="fa fa-check"></i><b>14.0.5</b> CRUNCEP</a></li>
<li class="chapter" data-level="14.0.6" data-path="available-meteorological-drivers.html"><a href="available-meteorological-drivers.html#cmip5"><i class="fa fa-check"></i><b>14.0.6</b> CMIP5</a></li>
<li class="chapter" data-level="14.0.7" data-path="available-meteorological-drivers.html"><a href="available-meteorological-drivers.html#nldas"><i class="fa fa-check"></i><b>14.0.7</b> NLDAS</a></li>
<li class="chapter" data-level="14.0.8" data-path="available-meteorological-drivers.html"><a href="available-meteorological-drivers.html#gldas"><i class="fa fa-check"></i><b>14.0.8</b> GLDAS</a></li>
<li class="chapter" data-level="14.0.9" data-path="available-meteorological-drivers.html"><a href="available-meteorological-drivers.html#paleon"><i class="fa fa-check"></i><b>14.0.9</b> PalEON</a></li>
<li class="chapter" data-level="14.0.10" data-path="available-meteorological-drivers.html"><a href="available-meteorological-drivers.html#fluxnetlathuile"><i class="fa fa-check"></i><b>14.0.10</b> FluxnetLaThuile</a></li>
<li class="chapter" data-level="14.0.11" data-path="available-meteorological-drivers.html"><a href="available-meteorological-drivers.html#geostreams"><i class="fa fa-check"></i><b>14.0.11</b> Geostreams</a></li>
<li class="chapter" data-level="14.0.12" data-path="available-meteorological-drivers.html"><a href="available-meteorological-drivers.html#era5"><i class="fa fa-check"></i><b>14.0.12</b> ERA5</a></li>
<li class="chapter" data-level="14.0.13" data-path="available-meteorological-drivers.html"><a href="available-meteorological-drivers.html#download-gfdl"><i class="fa fa-check"></i><b>14.0.13</b> Download GFDL</a></li>
<li class="chapter" data-level="14.0.14" data-path="available-meteorological-drivers.html"><a href="available-meteorological-drivers.html#cm3"><i class="fa fa-check"></i><b>14.0.14</b> CM3</a></li>
<li class="chapter" data-level="14.0.15" data-path="available-meteorological-drivers.html"><a href="available-meteorological-drivers.html#esm2m-esm2g"><i class="fa fa-check"></i><b>14.0.15</b> ESM2M &amp; ESM2G</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="database-sync.html"><a href="database-sync.html"><i class="fa fa-check"></i><b>15</b> Database synchronization</a><ul>
<li class="chapter" data-level="15.0.1" data-path="database-sync.html"><a href="database-sync.html#how-does-it-work"><i class="fa fa-check"></i><b>15.0.1</b> How does it work?</a></li>
<li class="chapter" data-level="15.0.2" data-path="database-sync.html"><a href="database-sync.html#set-up"><i class="fa fa-check"></i><b>15.0.2</b> Set up</a></li>
<li class="chapter" data-level="15.0.3" data-path="database-sync.html"><a href="database-sync.html#fetch-latest-data"><i class="fa fa-check"></i><b>15.0.3</b> Fetch latest data</a></li>
<li class="chapter" data-level="15.0.4" data-path="database-sync.html"><a href="database-sync.html#sharing-data"><i class="fa fa-check"></i><b>15.0.4</b> Sharing data</a></li>
<li class="chapter" data-level="15.0.5" data-path="database-sync.html"><a href="database-sync.html#automation"><i class="fa fa-check"></i><b>15.0.5</b> Automation</a></li>
<li class="chapter" data-level="15.0.6" data-path="database-sync.html"><a href="database-sync.html#database-maintentance"><i class="fa fa-check"></i><b>15.0.6</b> Database maintentance</a></li>
<li class="chapter" data-level="15.0.7" data-path="database-sync.html"><a href="database-sync.html#troubleshooting-1"><i class="fa fa-check"></i><b>15.0.7</b> Troubleshooting</a></li>
<li class="chapter" data-level="15.0.8" data-path="database-sync.html"><a href="database-sync.html#network-status-map"><i class="fa fa-check"></i><b>15.0.8</b> Network Status Map</a></li>
<li class="chapter" data-level="15.0.9" data-path="database-sync.html"><a href="database-sync.html#tasks"><i class="fa fa-check"></i><b>15.0.9</b> Tasks</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="standalone-tools-modules.html"><a href="standalone-tools-modules.html"><i class="fa fa-check"></i><b>16</b> Standalone tools (modules)</a><ul>
<li class="chapter" data-level="16.0.1" data-path="standalone-tools-modules.html"><a href="standalone-tools-modules.html#LoadData"><i class="fa fa-check"></i><b>16.0.1</b> Loading Data in PEcAn</a></li>
<li class="chapter" data-level="16.0.2" data-path="standalone-tools-modules.html"><a href="standalone-tools-modules.html#function-load_data"><i class="fa fa-check"></i><b>16.0.2</b> Function <code>load_data</code></a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="shiny.html"><a href="shiny.html"><i class="fa fa-check"></i><b>17</b> Shiny</a><ul>
<li class="chapter" data-level="17.1" data-path="shiny.html"><a href="shiny.html#testing-the-shiny-server"><i class="fa fa-check"></i><b>17.1</b> Testing the Shiny Server</a></li>
<li class="chapter" data-level="17.2" data-path="shiny.html"><a href="shiny.html#debugging-shiny-apps"><i class="fa fa-check"></i><b>17.2</b> Debugging Shiny Apps</a></li>
<li class="chapter" data-level="17.3" data-path="shiny.html"><a href="shiny.html#checking-log-files"><i class="fa fa-check"></i><b>17.3</b> Checking Log Files</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="adding-to-pecan.html"><a href="adding-to-pecan.html"><i class="fa fa-check"></i><b>18</b> Adding to PEcAn</a><ul>
<li class="chapter" data-level="18.1" data-path="adding-to-pecan.html"><a href="adding-to-pecan.html#adding-model"><i class="fa fa-check"></i><b>18.1</b> Adding An Ecosystem Model</a><ul>
<li class="chapter" data-level="18.1.1" data-path="adding-to-pecan.html"><a href="adding-to-pecan.html#using-pecan-database"><i class="fa fa-check"></i><b>18.1.1</b> Using PEcAn Database</a></li>
<li class="chapter" data-level="18.1.2" data-path="adding-to-pecan.html"><a href="adding-to-pecan.html#define-model_type"><i class="fa fa-check"></i><b>18.1.2</b> Define MODEL_TYPE</a></li>
<li class="chapter" data-level="18.1.3" data-path="adding-to-pecan.html"><a href="adding-to-pecan.html#machine"><i class="fa fa-check"></i><b>18.1.3</b> MACHINE</a></li>
<li class="chapter" data-level="18.1.4" data-path="adding-to-pecan.html"><a href="adding-to-pecan.html#model-1"><i class="fa fa-check"></i><b>18.1.4</b> MODEL</a></li>
<li class="chapter" data-level="18.1.5" data-path="adding-to-pecan.html"><a href="adding-to-pecan.html#formats"><i class="fa fa-check"></i><b>18.1.5</b> FORMATS</a></li>
<li class="chapter" data-level="18.1.6" data-path="adding-to-pecan.html"><a href="adding-to-pecan.html#model_type---formats"><i class="fa fa-check"></i><b>18.1.6</b> MODEL_TYPE -&gt; Formats</a></li>
<li class="chapter" data-level="18.1.7" data-path="adding-to-pecan.html"><a href="adding-to-pecan.html#inputs-2"><i class="fa fa-check"></i><b>18.1.7</b> INPUTS</a></li>
<li class="chapter" data-level="18.1.8" data-path="adding-to-pecan.html"><a href="adding-to-pecan.html#add-plant-functional-types-pfts"><i class="fa fa-check"></i><b>18.1.8</b> Add Plant Functional Types (PFTs)</a></li>
<li class="chapter" data-level="18.1.9" data-path="adding-to-pecan.html"><a href="adding-to-pecan.html#adding-priors-for-each-variable"><i class="fa fa-check"></i><b>18.1.9</b> Adding Priors for Each Variable</a></li>
<li class="chapter" data-level="18.1.10" data-path="adding-to-pecan.html"><a href="adding-to-pecan.html#interface-modules"><i class="fa fa-check"></i><b>18.1.10</b> Interface Modules</a></li>
</ul></li>
<li class="chapter" data-level="18.2" data-path="adding-to-pecan.html"><a href="adding-to-pecan.html#example-met-conversion-wrapper-function"><i class="fa fa-check"></i><b>18.2</b> Example met conversion wrapper function</a></li>
<li class="chapter" data-level="18.3" data-path="adding-to-pecan.html"><a href="adding-to-pecan.html#NewInput"><i class="fa fa-check"></i><b>18.3</b> Adding input data</a><ul>
<li class="chapter" data-level="18.3.1" data-path="adding-to-pecan.html"><a href="adding-to-pecan.html#input-records-in-bety"><i class="fa fa-check"></i><b>18.3.1</b> Input records in BETY</a></li>
<li class="chapter" data-level="18.3.2" data-path="adding-to-pecan.html"><a href="adding-to-pecan.html#create-a-database-file-record-for-the-input-data"><i class="fa fa-check"></i><b>18.3.2</b> Create a database file record for the input data</a></li>
<li class="chapter" data-level="18.3.3" data-path="adding-to-pecan.html"><a href="adding-to-pecan.html#creating-a-new-input-record-in-bety"><i class="fa fa-check"></i><b>18.3.3</b> Creating a new Input record in BETY</a></li>
<li class="chapter" data-level="18.3.4" data-path="adding-to-pecan.html"><a href="adding-to-pecan.html#InputConversions"><i class="fa fa-check"></i><b>18.3.4</b> Adding a new input converter</a></li>
</ul></li>
<li class="chapter" data-level="18.4" data-path="adding-to-pecan.html"><a href="adding-to-pecan.html#adding-data-web"><i class="fa fa-check"></i><b>18.4</b> Pecan Data Ingest via Web Interface</a><ul>
<li class="chapter" data-level="18.4.1" data-path="adding-to-pecan.html"><a href="adding-to-pecan.html#loading-data-1"><i class="fa fa-check"></i><b>18.4.1</b> Loading Data</a></li>
<li class="chapter" data-level="18.4.2" data-path="adding-to-pecan.html"><a href="adding-to-pecan.html#local-upload-example"><i class="fa fa-check"></i><b>18.4.2</b> Local Upload Example</a></li>
<li class="chapter" data-level="18.4.3" data-path="adding-to-pecan.html"><a href="adding-to-pecan.html#creating-a-format-record"><i class="fa fa-check"></i><b>18.4.3</b> 3. Creating a format record</a></li>
</ul></li>
<li class="chapter" data-level="18.5" data-path="adding-to-pecan.html"><a href="adding-to-pecan.html#NewFormat"><i class="fa fa-check"></i><b>18.5</b> Creating a new format</a><ul>
<li class="chapter" data-level="18.5.1" data-path="adding-to-pecan.html"><a href="adding-to-pecan.html#formats-in-bety"><i class="fa fa-check"></i><b>18.5.1</b> Formats in BETY</a></li>
<li class="chapter" data-level="18.5.2" data-path="adding-to-pecan.html"><a href="adding-to-pecan.html#creating-a-new-format-in-bety"><i class="fa fa-check"></i><b>18.5.2</b> Creating a new format in BETY</a></li>
</ul></li>
<li class="chapter" data-level="18.6" data-path="adding-to-pecan.html"><a href="adding-to-pecan.html#NewBenchmark"><i class="fa fa-check"></i><b>18.6</b> Creating a new benchmark reference run</a></li>
<li class="chapter" data-level="18.7" data-path="adding-to-pecan.html"><a href="adding-to-pecan.html#editing-records"><i class="fa fa-check"></i><b>18.7</b> Editing records</a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="troubleshooting-and-debugging-pecan.html"><a href="troubleshooting-and-debugging-pecan.html"><i class="fa fa-check"></i><b>19</b> Troubleshooting and Debugging PEcAn</a><ul>
<li class="chapter" data-level="19.0.1" data-path="troubleshooting-and-debugging-pecan.html"><a href="troubleshooting-and-debugging-pecan.html#cookies-and-pecan-web-pages"><i class="fa fa-check"></i><b>19.0.1</b> Cookies and pecan web pages</a></li>
<li class="chapter" data-level="19.0.2" data-path="troubleshooting-and-debugging-pecan.html"><a href="troubleshooting-and-debugging-pecan.html#warning-mkdir-function.mkdir-no-such-file-or-directory"><i class="fa fa-check"></i><b>19.0.2</b> <code>Warning: mkdir() [function.mkdir]: No such file or directory</code></a></li>
<li class="chapter" data-level="19.0.3" data-path="troubleshooting-and-debugging-pecan.html"><a href="troubleshooting-and-debugging-pecan.html#after-creating-a-new-pft-the-tag-for-pft-not-passed-to-config.xml-in-ed"><i class="fa fa-check"></i><b>19.0.3</b> After creating a new PFT the <num> tag for PFT not passed to config.xml in ED</a></li>
<li class="chapter" data-level="19.1" data-path="troubleshooting-and-debugging-pecan.html"><a href="troubleshooting-and-debugging-pecan.html#debugging"><i class="fa fa-check"></i><b>19.1</b> Debugging</a><ul>
<li class="chapter" data-level="19.1.1" data-path="troubleshooting-and-debugging-pecan.html"><a href="troubleshooting-and-debugging-pecan.html#using-testsworkflow.r"><i class="fa fa-check"></i><b>19.1.1</b> Using <code>tests/workflow.R</code></a></li>
<li class="chapter" data-level="19.1.2" data-path="troubleshooting-and-debugging-pecan.html"><a href="troubleshooting-and-debugging-pecan.html#useful-scripts"><i class="fa fa-check"></i><b>19.1.2</b> Useful scripts</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="20" data-path="database.html"><a href="database.html"><i class="fa fa-check"></i><b>20</b> BETY Database Administration</a><ul>
<li class="chapter" data-level="20.0.1" data-path="database.html"><a href="database.html#database-setup"><i class="fa fa-check"></i><b>20.0.1</b> Best practices</a></li>
<li class="chapter" data-level="20.0.2" data-path="database.html"><a href="database.html#backup-of-bety-database"><i class="fa fa-check"></i><b>20.0.2</b> Backup of BETY database</a></li>
<li class="chapter" data-level="20.0.3" data-path="database.html"><a href="database.html#restore-of-bety-database"><i class="fa fa-check"></i><b>20.0.3</b> Restore of BETY database</a></li>
</ul></li>
<li class="chapter" data-level="21" data-path="workflow-modules.html"><a href="workflow-modules.html"><i class="fa fa-check"></i><b>21</b> Workflow modules</a><ul>
<li class="chapter" data-level="21.0.1" data-path="workflow-modules.html"><a href="workflow-modules.html#overview-1"><i class="fa fa-check"></i><b>21.0.1</b> Overview</a></li>
<li class="chapter" data-level="21.0.2" data-path="workflow-modules.html"><a href="workflow-modules.html#load-settings"><i class="fa fa-check"></i><b>21.0.2</b> Load Settings:</a></li>
<li class="chapter" data-level="21.0.3" data-path="workflow-modules.html"><a href="workflow-modules.html#query-database"><i class="fa fa-check"></i><b>21.0.3</b> Query Database:</a></li>
<li class="chapter" data-level="21.0.4" data-path="workflow-modules.html"><a href="workflow-modules.html#meta-analysis"><i class="fa fa-check"></i><b>21.0.4</b> Meta Analysis:</a></li>
<li class="chapter" data-level="21.0.5" data-path="workflow-modules.html"><a href="workflow-modules.html#write-configuration-files"><i class="fa fa-check"></i><b>21.0.5</b> Write Configuration Files</a></li>
<li class="chapter" data-level="21.0.6" data-path="workflow-modules.html"><a href="workflow-modules.html#start-runs"><i class="fa fa-check"></i><b>21.0.6</b> Start Runs:</a></li>
<li class="chapter" data-level="21.0.7" data-path="workflow-modules.html"><a href="workflow-modules.html#get-model-output"><i class="fa fa-check"></i><b>21.0.7</b> Get Model Output</a></li>
<li class="chapter" data-level="21.0.8" data-path="workflow-modules.html"><a href="workflow-modules.html#ensemble-analysis"><i class="fa fa-check"></i><b>21.0.8</b> Ensemble Analysis</a></li>
<li class="chapter" data-level="21.0.9" data-path="workflow-modules.html"><a href="workflow-modules.html#sensitivity-analysis-variance-decomposition"><i class="fa fa-check"></i><b>21.0.9</b> Sensitivity Analysis, Variance Decomposition</a></li>
<li class="chapter" data-level="21.0.10" data-path="workflow-modules.html"><a href="workflow-modules.html#glossary"><i class="fa fa-check"></i><b>21.0.10</b> Glossary</a></li>
<li class="chapter" data-level="21.1" data-path="workflow-modules.html"><a href="workflow-modules.html#pecanvm"><i class="fa fa-check"></i><b>21.1</b> PEcAn Virtual Machine</a><ul>
<li class="chapter" data-level="21.1.1" data-path="workflow-modules.html"><a href="workflow-modules.html#aws-setup"><i class="fa fa-check"></i><b>21.1.1</b> AWS Setup</a></li>
<li class="chapter" data-level="21.1.2" data-path="workflow-modules.html"><a href="workflow-modules.html#porting-vm-to-aws"><i class="fa fa-check"></i><b>21.1.2</b> Porting VM to AWS</a></li>
<li class="chapter" data-level="21.1.3" data-path="workflow-modules.html"><a href="workflow-modules.html#set-up-multiple-instances-optional"><i class="fa fa-check"></i><b>21.1.3</b> Set up multiple instances (optional)</a></li>
</ul></li>
<li class="chapter" data-level="21.2" data-path="workflow-modules.html"><a href="workflow-modules.html#shiny-setup"><i class="fa fa-check"></i><b>21.2</b> Shiny Setup</a><ul>
<li class="chapter" data-level="21.2.1" data-path="workflow-modules.html"><a href="workflow-modules.html#install-the-shiny-r-package-and-shiny-server"><i class="fa fa-check"></i><b>21.2.1</b> Install the Shiny R package and Shiny server</a></li>
<li class="chapter" data-level="21.2.2" data-path="workflow-modules.html"><a href="workflow-modules.html#modify-the-shiny-configuration-file"><i class="fa fa-check"></i><b>21.2.2</b> Modify the shiny configuration file</a></li>
<li class="chapter" data-level="21.2.3" data-path="workflow-modules.html"><a href="workflow-modules.html#set-the-apache-proxy"><i class="fa fa-check"></i><b>21.2.3</b> Set the Apache proxy</a></li>
<li class="chapter" data-level="21.2.4" data-path="workflow-modules.html"><a href="workflow-modules.html#enable-and-start-the-shiny-server-and-restart-apache"><i class="fa fa-check"></i><b>21.2.4</b> Enable and start the shiny server, and restart apache</a></li>
<li class="chapter" data-level="21.2.5" data-path="workflow-modules.html"><a href="workflow-modules.html#troubleshooting-2"><i class="fa fa-check"></i><b>21.2.5</b> Troubleshooting</a></li>
<li class="chapter" data-level="21.2.6" data-path="workflow-modules.html"><a href="workflow-modules.html#further-reading"><i class="fa fa-check"></i><b>21.2.6</b> Further reading</a></li>
<li class="chapter" data-level="21.2.7" data-path="workflow-modules.html"><a href="workflow-modules.html#thredds-setup"><i class="fa fa-check"></i><b>21.2.7</b> Thredds Setup</a></li>
<li class="chapter" data-level="21.2.8" data-path="workflow-modules.html"><a href="workflow-modules.html#install-the-tomcat-8-and-thredds-webapp"><i class="fa fa-check"></i><b>21.2.8</b> Install the Tomcat 8 and Thredds webapp</a></li>
<li class="chapter" data-level="21.2.9" data-path="workflow-modules.html"><a href="workflow-modules.html#update-the-catalog"><i class="fa fa-check"></i><b>21.2.9</b> Update the catalog</a></li>
<li class="chapter" data-level="21.2.10" data-path="workflow-modules.html"><a href="workflow-modules.html#troubleshooting-3"><i class="fa fa-check"></i><b>21.2.10</b> Troubleshooting</a></li>
<li class="chapter" data-level="21.2.11" data-path="workflow-modules.html"><a href="workflow-modules.html#further-reading-1"><i class="fa fa-check"></i><b>21.2.11</b> Further reading</a></li>
<li class="chapter" data-level="21.2.12" data-path="workflow-modules.html"><a href="workflow-modules.html#osinstall"><i class="fa fa-check"></i><b>21.2.12</b> OS Specific Installations</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="22" data-path="docker-index.html"><a href="docker-index.html"><i class="fa fa-check"></i><b>22</b> Docker</a><ul>
<li class="chapter" data-level="22.1" data-path="docker-index.html"><a href="docker-index.html#docker-intro"><i class="fa fa-check"></i><b>22.1</b> Introduction to Docker?</a><ul>
<li class="chapter" data-level="22.1.1" data-path="docker-index.html"><a href="docker-index.html#what-is-docker"><i class="fa fa-check"></i><b>22.1.1</b> What is Docker?</a></li>
<li class="chapter" data-level="22.1.2" data-path="docker-index.html"><a href="docker-index.html#working-with-docker"><i class="fa fa-check"></i><b>22.1.2</b> Working with Docker</a></li>
<li class="chapter" data-level="22.1.3" data-path="docker-index.html"><a href="docker-index.html#docker-compose"><i class="fa fa-check"></i><b>22.1.3</b> <code>docker-compose</code></a></li>
</ul></li>
<li class="chapter" data-level="22.2" data-path="docker-index.html"><a href="docker-index.html#docker-quickstart"><i class="fa fa-check"></i><b>22.2</b> The PEcAn docker install process in detail</a><ul>
<li class="chapter" data-level="22.2.1" data-path="docker-index.html"><a href="docker-index.html#pecan-setup-compose-configure"><i class="fa fa-check"></i><b>22.2.1</b> Configure docker-compose</a></li>
<li class="chapter" data-level="22.2.2" data-path="docker-index.html"><a href="docker-index.html#pecan-docker-quickstart-init"><i class="fa fa-check"></i><b>22.2.2</b> Initialize PEcAn (first time only)</a></li>
<li class="chapter" data-level="22.2.3" data-path="docker-index.html"><a href="docker-index.html#docker-quickstart-troubleshooting"><i class="fa fa-check"></i><b>22.2.3</b> Troubleshooting</a></li>
</ul></li>
<li class="chapter" data-level="22.3" data-path="docker-index.html"><a href="docker-index.html#pecan-docker"><i class="fa fa-check"></i><b>22.3</b> PEcAn Docker Architecture</a><ul>
<li class="chapter" data-level="22.3.1" data-path="docker-index.html"><a href="docker-index.html#pecan-docker-overview"><i class="fa fa-check"></i><b>22.3.1</b> Overview</a></li>
<li class="chapter" data-level="22.3.2" data-path="docker-index.html"><a href="docker-index.html#pecan-docker-compose"><i class="fa fa-check"></i><b>22.3.2</b> PEcAn’s <code>docker-compose</code></a></li>
<li class="chapter" data-level="22.3.3" data-path="docker-index.html"><a href="docker-index.html#pecan-dc-structure"><i class="fa fa-check"></i><b>22.3.3</b> Top-level structure</a></li>
<li class="chapter" data-level="22.3.4" data-path="docker-index.html"><a href="docker-index.html#pecan-dc-traefik"><i class="fa fa-check"></i><b>22.3.4</b> <code>traefik</code></a></li>
<li class="chapter" data-level="22.3.5" data-path="docker-index.html"><a href="docker-index.html#pecan-dc-portainer"><i class="fa fa-check"></i><b>22.3.5</b> <code>portainer</code></a></li>
<li class="chapter" data-level="22.3.6" data-path="docker-index.html"><a href="docker-index.html#pecan-dc-minio"><i class="fa fa-check"></i><b>22.3.6</b> <code>minio</code></a></li>
<li class="chapter" data-level="22.3.7" data-path="docker-index.html"><a href="docker-index.html#pecan-dc-thredds"><i class="fa fa-check"></i><b>22.3.7</b> <code>thredds</code></a></li>
<li class="chapter" data-level="22.3.8" data-path="docker-index.html"><a href="docker-index.html#pecan-dc-postgres"><i class="fa fa-check"></i><b>22.3.8</b> <code>postgres</code></a></li>
<li class="chapter" data-level="22.3.9" data-path="docker-index.html"><a href="docker-index.html#pecan-dc-rabbitmq"><i class="fa fa-check"></i><b>22.3.9</b> <code>rabbitmq</code></a></li>
<li class="chapter" data-level="22.3.10" data-path="docker-index.html"><a href="docker-index.html#pecan-dc-bety"><i class="fa fa-check"></i><b>22.3.10</b> <code>bety</code></a></li>
<li class="chapter" data-level="22.3.11" data-path="docker-index.html"><a href="docker-index.html#pecan-dc-docs"><i class="fa fa-check"></i><b>22.3.11</b> <code>docs</code></a></li>
<li class="chapter" data-level="22.3.12" data-path="docker-index.html"><a href="docker-index.html#pecan-dc-web"><i class="fa fa-check"></i><b>22.3.12</b> <code>web</code></a></li>
<li class="chapter" data-level="22.3.13" data-path="docker-index.html"><a href="docker-index.html#pecan-dc-executor"><i class="fa fa-check"></i><b>22.3.13</b> <code>executor</code></a></li>
<li class="chapter" data-level="22.3.14" data-path="docker-index.html"><a href="docker-index.html#pecan-dc-monitor"><i class="fa fa-check"></i><b>22.3.14</b> <code>monitor</code></a></li>
<li class="chapter" data-level="22.3.15" data-path="docker-index.html"><a href="docker-index.html#pecan-dc-models"><i class="fa fa-check"></i><b>22.3.15</b> Model-specific containers</a></li>
</ul></li>
<li class="chapter" data-level="22.4" data-path="docker-index.html"><a href="docker-index.html#model-docker"><i class="fa fa-check"></i><b>22.4</b> Models using Docker</a><ul>
<li class="chapter" data-level="22.4.1" data-path="docker-index.html"><a href="docker-index.html#model-docker-json-file"><i class="fa fa-check"></i><b>22.4.1</b> Model information</a></li>
<li class="chapter" data-level="22.4.2" data-path="docker-index.html"><a href="docker-index.html#model-docker-Dockerfile"><i class="fa fa-check"></i><b>22.4.2</b> Model build</a></li>
<li class="chapter" data-level="22.4.3" data-path="docker-index.html"><a href="docker-index.html#common-docker-problems"><i class="fa fa-check"></i><b>22.4.3</b> Common problems</a></li>
<li class="chapter" data-level="22.4.4" data-path="docker-index.html"><a href="docker-index.html#debugging-missing-libraries"><i class="fa fa-check"></i><b>22.4.4</b> Debugging missing libraries</a></li>
</ul></li>
<li class="chapter" data-level="22.5" data-path="docker-index.html"><a href="docker-index.html#docker-build-images"><i class="fa fa-check"></i><b>22.5</b> Building and modifying images</a><ul>
<li class="chapter" data-level="22.5.1" data-path="docker-index.html"><a href="docker-index.html#docker-local-devel"><i class="fa fa-check"></i><b>22.5.1</b> Local development and testing with Docker</a></li>
</ul></li>
<li class="chapter" data-level="22.6" data-path="docker-index.html"><a href="docker-index.html#docker-troubleshooting"><i class="fa fa-check"></i><b>22.6</b> Troubleshooting Docker</a><ul>
<li class="chapter" data-level="22.6.1" data-path="docker-index.html"><a href="docker-index.html#package-not-available-while-building-images"><i class="fa fa-check"></i><b>22.6.1</b> “Package not available” while building images</a></li>
</ul></li>
<li class="chapter" data-level="22.7" data-path="docker-index.html"><a href="docker-index.html#docker-migrate"><i class="fa fa-check"></i><b>22.7</b> Migrating PEcAn from VM to Docker</a><ul>
<li class="chapter" data-level="22.7.1" data-path="docker-index.html"><a href="docker-index.html#running-bety-as-a-docker-container"><i class="fa fa-check"></i><b>22.7.1</b> Running BETY as a docker container</a></li>
</ul></li>
<li class="chapter" data-level="22.8" data-path="docker-index.html"><a href="docker-index.html#pecan-api"><i class="fa fa-check"></i><b>22.8</b> The PEcAn Docker API</a></li>
<li class="chapter" data-level="22.9" data-path="docker-index.html"><a href="docker-index.html#rabbitmq"><i class="fa fa-check"></i><b>22.9</b> RabbitMQ</a><ul>
<li class="chapter" data-level="22.9.1" data-path="docker-index.html"><a href="docker-index.html#rabbitmq-basics-sender"><i class="fa fa-check"></i><b>22.9.1</b> Producer – <code>sender.py</code></a></li>
<li class="chapter" data-level="22.9.2" data-path="docker-index.html"><a href="docker-index.html#rabbitmq-basics-receiver"><i class="fa fa-check"></i><b>22.9.2</b> Consumer – <code>receiver.py</code></a></li>
<li class="chapter" data-level="22.9.3" data-path="docker-index.html"><a href="docker-index.html#rabbitmq-web"><i class="fa fa-check"></i><b>22.9.3</b> RabbitMQ and the PEcAn web interface</a></li>
<li class="chapter" data-level="22.9.4" data-path="docker-index.html"><a href="docker-index.html#rabbitmq-xml"><i class="fa fa-check"></i><b>22.9.4</b> RabbitMQ in the PEcAn XML</a></li>
<li class="chapter" data-level="22.9.5" data-path="docker-index.html"><a href="docker-index.html#rabbitmq-dockerfile"><i class="fa fa-check"></i><b>22.9.5</b> RabbitMQ configuration in Dockerfiles</a></li>
<li class="chapter" data-level="22.9.6" data-path="docker-index.html"><a href="docker-index.html#rabbitmq-case-study"><i class="fa fa-check"></i><b>22.9.6</b> Case study: PEcAn web interface</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="23" data-path="pecan-remote.html"><a href="pecan-remote.html"><i class="fa fa-check"></i><b>23</b> Remote execution with PEcAn</a><ul>
<li class="chapter" data-level="23.1" data-path="pecan-remote.html"><a href="pecan-remote.html#basics-of-ssh"><i class="fa fa-check"></i><b>23.1</b> Basics of SSH</a></li>
<li class="chapter" data-level="23.2" data-path="pecan-remote.html"><a href="pecan-remote.html#ssh-authentication-password-vs.ssh-key"><i class="fa fa-check"></i><b>23.2</b> SSH authentication – password vs. SSH key</a></li>
<li class="chapter" data-level="23.3" data-path="pecan-remote.html"><a href="pecan-remote.html#ssh-tunneling"><i class="fa fa-check"></i><b>23.3</b> SSH tunneling</a></li>
<li class="chapter" data-level="23.4" data-path="pecan-remote.html"><a href="pecan-remote.html#ssh-tunnels-and-pecan"><i class="fa fa-check"></i><b>23.4</b> SSH tunnels and PEcAn</a></li>
<li class="chapter" data-level="23.5" data-path="pecan-remote.html"><a href="pecan-remote.html#basic-remote-execute-functions"><i class="fa fa-check"></i><b>23.5</b> Basic remote execute functions</a></li>
<li class="chapter" data-level="23.6" data-path="pecan-remote.html"><a href="pecan-remote.html#remote-model-execution-with-pecan"><i class="fa fa-check"></i><b>23.6</b> Remote model execution with PEcAn</a></li>
<li class="chapter" data-level="23.7" data-path="pecan-remote.html"><a href="pecan-remote.html#xml-configuration"><i class="fa fa-check"></i><b>23.7</b> XML configuration</a></li>
<li class="chapter" data-level="23.8" data-path="pecan-remote.html"><a href="pecan-remote.html#configuration-for-pecan-web-interface"><i class="fa fa-check"></i><b>23.8</b> Configuration for PEcAn web interface</a></li>
<li class="chapter" data-level="23.9" data-path="pecan-remote.html"><a href="pecan-remote.html#running-pecan-code-for-remotely"><i class="fa fa-check"></i><b>23.9</b> Running PEcAn code for remotely</a></li>
<li class="chapter" data-level="23.10" data-path="pecan-remote.html"><a href="pecan-remote.html#special-case-geo.bu.edu"><i class="fa fa-check"></i><b>23.10</b> Special case: <code>geo.bu.edu</code></a></li>
</ul></li>
<li class="chapter" data-level="24" data-path="data-assimilation-with-dart.html"><a href="data-assimilation-with-dart.html"><i class="fa fa-check"></i><b>24</b> Data assimilation with DART</a></li>
<li class="part"><span><b>IV Appendix</b></span></li>
<li class="chapter" data-level="25" data-path="miscellaneous.html"><a href="miscellaneous.html"><i class="fa fa-check"></i><b>25</b> Miscellaneous</a><ul>
<li class="chapter" data-level="25.1" data-path="miscellaneous.html"><a href="miscellaneous.html#todo"><i class="fa fa-check"></i><b>25.1</b> TODO</a></li>
<li class="chapter" data-level="25.2" data-path="miscellaneous.html"><a href="miscellaneous.html#using-the-pecan-download.file-function"><i class="fa fa-check"></i><b>25.2</b> Using the PEcAn download.file() function</a></li>
</ul></li>
<li class="chapter" data-level="26" data-path="faq.html"><a href="faq.html"><i class="fa fa-check"></i><b>26</b> FAQ</a></li>
<li class="chapter" data-level="27" data-path="pecan-project-used-in-courses.html"><a href="pecan-project-used-in-courses.html"><i class="fa fa-check"></i><b>27</b> PEcAn Project Used in Courses</a><ul>
<li class="chapter" data-level="27.0.1" data-path="pecan-project-used-in-courses.html"><a href="pecan-project-used-in-courses.html#university-classes"><i class="fa fa-check"></i><b>27.0.1</b> University classes</a></li>
<li class="chapter" data-level="27.0.2" data-path="pecan-project-used-in-courses.html"><a href="pecan-project-used-in-courses.html#summer-courses-workshops"><i class="fa fa-check"></i><b>27.0.2</b> Summer Courses / Workshops</a></li>
<li class="chapter" data-level="27.0.3" data-path="pecan-project-used-in-courses.html"><a href="pecan-project-used-in-courses.html#selected-publications"><i class="fa fa-check"></i><b>27.0.3</b> Selected Publications</a></li>
</ul></li>
<li class="chapter" data-level="28" data-path="package-dependencies.html"><a href="package-dependencies.html"><i class="fa fa-check"></i><b>28</b> Package Dependencies</a><ul>
<li class="chapter" data-level="28.1" data-path="package-dependencies.html"><a href="package-dependencies.html#executive-summary-what-to-usually-do"><i class="fa fa-check"></i><b>28.1</b> Executive Summary: What to usually do</a></li>
<li class="chapter" data-level="28.2" data-path="package-dependencies.html"><a href="package-dependencies.html#big-picture-whats-possible-to-do"><i class="fa fa-check"></i><b>28.2</b> Big Picture: What’s possible to do</a></li>
<li class="chapter" data-level="28.3" data-path="package-dependencies.html"><a href="package-dependencies.html#declaring-dependencies-depends-suggests-imports"><i class="fa fa-check"></i><b>28.3</b> Declaring Dependencies: Depends, Suggests, Imports</a></li>
<li class="chapter" data-level="28.4" data-path="package-dependencies.html"><a href="package-dependencies.html#importing-functions-use-roxygen"><i class="fa fa-check"></i><b>28.4</b> Importing Functions: Use Roxygen</a></li>
<li class="chapter" data-level="28.5" data-path="package-dependencies.html"><a href="package-dependencies.html#loading-code-dont-but-use-requirenamespace-when-you-do"><i class="fa fa-check"></i><b>28.5</b> Loading Code: Don’t… But Use <code>requireNamespace</code> When You Do</a></li>
<li class="chapter" data-level="28.6" data-path="package-dependencies.html"><a href="package-dependencies.html#installing-dependencies-let-the-machines-do-it"><i class="fa fa-check"></i><b>28.6</b> Installing dependencies: Let the machines do it</a></li>
</ul></li>
<li class="chapter" data-level="29" data-path="appendix-testthat.html"><a href="appendix-testthat.html"><i class="fa fa-check"></i><b>29</b> Testing with the <code>testthat</code> package</a><ul>
<li class="chapter" data-level="29.1" data-path="appendix-testthat.html"><a href="appendix-testthat.html#list-of-expectations"><i class="fa fa-check"></i><b>29.1</b> List of Expectations</a></li>
<li class="chapter" data-level="29.2" data-path="appendix-testthat.html"><a href="appendix-testthat.html#basic-use-of-the-testthat-package"><i class="fa fa-check"></i><b>29.2</b> Basic use of the <code>testthat</code> package</a></li>
<li class="chapter" data-level="29.3" data-path="appendix-testthat.html"><a href="appendix-testthat.html#data-for-tests"><i class="fa fa-check"></i><b>29.3</b> Data for tests</a></li>
<li class="chapter" data-level="29.4" data-path="appendix-testthat.html"><a href="appendix-testthat.html#settings-1"><i class="fa fa-check"></i><b>29.4</b> Settings</a></li>
<li class="chapter" data-level="29.5" data-path="appendix-testthat.html"><a href="appendix-testthat.html#helper-functions-for-unit-tests"><i class="fa fa-check"></i><b>29.5</b> Helper functions for unit tests</a></li>
</ul></li>
<li class="chapter" data-level="30" data-path="developer-devtools.html"><a href="developer-devtools.html"><i class="fa fa-check"></i><b>30</b> <code>devtools</code> package</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">The Predictive Ecosystem Analyzer</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="adding-to-pecan" class="section level1">
<h1><span class="header-section-number">18</span> Adding to PEcAn</h1>
<ul>
<li>Case studies
<ul>
<li><a href="adding-to-pecan.html#adding-model">Adding a model</a></li>
<li><a href="adding-to-pecan.html#NewInput">Adding input data</a></li>
<li><a href="adding-to-pecan.html#adding-data-web">Adding data through the web interface</a></li>
<li>Adding new species, PFTs, and traits from a new site
<ul>
<li>Add a site</li>
<li>Add some species</li>
<li>Add PFT</li>
<li>Add trait data</li>
</ul></li>
<li>Adding a benchmark</li>
<li>Adding a met driver</li>
</ul></li>
<li><a href="adding-to-pecan.html#editing-records">Reference</a> (How to edit records in bety)
<ul>
<li>Models</li>
<li>Species</li>
<li>PFTs</li>
<li>Traits</li>
<li>Inputs</li>
<li>DB files</li>
<li>Variables</li>
<li>Formats</li>
<li>(Link each section to relevant Bety tables)</li>
</ul></li>
</ul>
<div id="adding-model" class="section level2">
<h2><span class="header-section-number">18.1</span> Adding An Ecosystem Model</h2>
<p><strong>Adding a model to PEcAn involves two activities:</strong></p>
<ol style="list-style-type: decimal">
<li>Updating the PEcAn database to register the model</li>
<li>Writing the interface modules between the model and PEcAn</li>
</ol>
<p><strong>Note that coupling a model to PEcAn should not require any changes to the model code itself</strong>. A key aspect of our design philosophy is that we want it to be easy to add models to the system and we want to using the working version of the code that is used by all other model users, not a special branch (which would rapidly end up out-of-date).</p>
<div id="using-pecan-database" class="section level3">
<h3><span class="header-section-number">18.1.1</span> Using PEcAn Database</h3>
<p>To run a model within PEcAn requires that the PEcAn database has sufficient information about the model. This includes a MODEL_TYPE designation, the types of inputs the model requires, the location of the model executable, and the plant functional types used by the model.</p>
<p>The instructions in this section assume that you will be specifying this information using the BETYdb web-based interface. This can be done either on your local VM (localhost:3280/bety or localhost:6480/bety) or on a server installation of BETYdb. However you interact with BETYdb, we encourage you to set up your PEcAn instance to support <a href="database-sync.html#database-sync">database syncs</a> so that these changes can be shared and backed-up across the PEcAn network.</p>
<p><img src="11_images/bety_main_page.png" /></p>
<p>The figure below summarizes the relevant database tables that need to be updated to add a new model and the primary variables that define each table.</p>
<p><img src="https://www.lucidchart.com/publicSegments/view/54a8aea8-9360-4628-af9e-392a0a00c27b/image.png" /></p>
</div>
<div id="define-model_type" class="section level3">
<h3><span class="header-section-number">18.1.2</span> Define MODEL_TYPE</h3>
<p>The first step to adding a model is to create a new MODEL_TYPE, which defines the abstract model class. This MODEL_TYPE is used to specify input requirements, define plant functional types, and keep track of different model versions.</p>
<p>The MODEL_TYPE is created by selecting Runs &gt; Model Type and then clicking on <em>New Model Type</em>. The MODEL_TYPE name should be identical to the MODEL package name (see Interface Module below) and is case sensitive.</p>
<p><img src="11_images/bety_modeltype_1.png" />
<img src="11_images/bety_modeltype_2.png" /></p>
</div>
<div id="machine" class="section level3">
<h3><span class="header-section-number">18.1.3</span> MACHINE</h3>
<p>The PEcAn design acknowledges that the same model executables and input files may exist on multiple computers. Therefore, we need to define the machine that that we are using. If you are running on the VM then the local machine is already defined as <em>pecan</em>. Otherwise, you will need to select Runs &gt; Machines, click <em>New Machine</em>, and enter the URL of your server (e.g. pecan2.bu.edu).</p>
</div>
<div id="model-1" class="section level3">
<h3><span class="header-section-number">18.1.4</span> MODEL</h3>
<p>Next we are going to tell PEcAn where the model executable is. Select Runs &gt; Files, and click ADD. Use the pull down menu to specify the machine you just defined above and fill in the path and name for the executable. For example, if SIPNET is installed at /usr/local/bin/sipnet then the path is /usr/local/bin/ and the file (executable) is sipnet.</p>
<p>Now we will create the model record and associate this with the File we just registered. The first time you do this select Runs &gt; Models and click <em>New Model</em>. Specify a descriptive name of the model (which doesn’t have to be the same as MODEL_TYPE), select the MODEL_TYPE from the pull down, and provide a revision identifier for the model (e.g. v3.2.1). Once the record is created select it from the Models table and click EDIT RECORD. Click on “View Related Files” and when the search window appears search for the model executable you just added (if you are unsure which file to choose you can go back to the Files menu and look up the unique ID number). You can then associate this Model record with the File by clicking on the +/- symbol. By contrast, clicking on the name itself will take you to the File record.</p>
<p>In the future, if you set up the SAME MODEL VERSION on a different computer you can add that Machine and File to PEcAn and then associate this new File with this same Model record. A single version of a model should only be entered into PEcAn <strong>once</strong>.</p>
<p>If a new version of the model is developed that is derived from the current version you should add this as a new Model record but with the same MODEL_TYPE as the original. Furthermore, you should set the previous version of the model as Parent of this new version.</p>
</div>
<div id="formats" class="section level3">
<h3><span class="header-section-number">18.1.5</span> FORMATS</h3>
<p>The PEcAn database keep track of all the input files passed to models, as well as any data used in model validation or data assimilation. Before we start to register these files with PEcAn we need to define the format these files will be in. To create a new format see <a href="adding-to-pecan.html#NewFormat">Formats Documentation</a>.</p>
</div>
<div id="model_type---formats" class="section level3">
<h3><span class="header-section-number">18.1.6</span> MODEL_TYPE -&gt; Formats</h3>
<p>For each of the input formats you specify for your model, you will need to edit your MODEL_TYPE record to add an association between the format and the MODEL_TYPE. Go to Runs &gt; Model Type, select your record and click on the Edit button. Next, click on “Edit Associated Formats” and choose the Format you just defined from the pull down menu. If the <em>Input</em> box is checked then all matching Input records will be displayed in the PEcAn site run selection page when you are defining a model run. In other words, the set of model inputs available through the PEcAn web interface is model-specific and dynamically generated from the associations between MODEL_TYPEs and Formats. If you also check the <em>Required</em> box, then the Input will be treated as required and PEcAn will not run the model if that input is not available. Furthermore, on the site selection webpage, PEcAn will filter the available sites and only display pins on the Google Map for sites that have a full set of required inputs (or where those inputs could be generated using PEcAn’s workflows). Similarly, to make a site appear on the Google Map, all you need to do is specify Inputs, as described in the next section, and the point should automatically appear on the map.</p>
</div>
<div id="inputs-2" class="section level3">
<h3><span class="header-section-number">18.1.7</span> INPUTS</h3>
<p>After a file Format has been created then input files can be registered with the database. Creating Inputs can be found under <a href="adding-to-pecan.html#NewInput">How to insert new Input data</a>.</p>
</div>
<div id="add-plant-functional-types-pfts" class="section level3">
<h3><span class="header-section-number">18.1.8</span> Add Plant Functional Types (PFTs)</h3>
<p>Since many of the PEcAn tools are designed to keep track of parameter uncertainties and assimilate data into models, to use PEcAn with a model it is important to define Plant Functional Types for the sites or regions that you will be running the model.</p>
<p>Create a new PFT entry by selecting Data &gt; PFTs and then clicking on <em>New PFT</em>.</p>
<p><img src="11_images/bety_pft_1.png" />
<img src="11_images/bety_pft_2.png" /></p>
<p>Give the PFT a descriptive name (e.g., temperate deciduous). PFTs are MODEL_TYPE specific, so choose your MODEL_TYPE from the pull down menu.</p>
<p><img src="11_images/bety_pft_3.png" /></p>
<div id="species" class="section level4">
<h4><span class="header-section-number">18.1.8.1</span> Species</h4>
<p>Within PEcAn there are no predefined PFTs and user can create new PFTs very easily at whatever taxonomic level is most appropriate, from PFTs for individual species up to one PFT for all plants globally. To allow PEcAn to query its trait database for information about a PFT, you will want to associate species with the PFT record by choosing Edit and then “View Related Species”. Species can be searched for by common or scientific name and then added to a PFT using the +/- button.</p>
</div>
<div id="cultivars" class="section level4">
<h4><span class="header-section-number">18.1.8.2</span> Cultivars</h4>
<p>You can also define PFTs whose members are <em>cultivars</em> instead of species. This is designed for analyses where you want to want to perform meta-analysis on within-species comparisons (e.g. cultivar evaluation in an agricultural model) but may be useful for other cases when you want to specify different priors for some member of a species. You cannot associate both species and cultivars with the same PFT, but the cultivars in a cultivar PFT may come from different species, potentially including all known cultivars from some of the species, if you wish to and have thought about how to interpret the results.</p>
<p>It is not yet possible to add a cultivar PFT through the BETYdb web interface. See <a href="https://github.com/PecanProject/pecan/pull/1826#issuecomment-360665864">this GithHub comment</a> for an example of how to define one manually in PostgreSQL.</p>
</div>
</div>
<div id="adding-priors-for-each-variable" class="section level3">
<h3><span class="header-section-number">18.1.9</span> Adding Priors for Each Variable</h3>
<p>In addition to adding species, a PFT is defined in PEcAn by the list of variables associated with the PFT. PEcAn takes a fundamentally Bayesian approach to representing model parameters, so variables are not entered as fixed constants but as prior probability distributions.</p>
<p>There are a wide variety of priors already defined in the PEcAn database that often range from very diffuse and generic to very informative priors for specific PFTs.</p>
<p>These pre-existing prior distributions can be added to a PFT. Navigate to the PFT from Data &gt; PFTs and selecting the edit button in the Actions column for the chosen PFT.</p>
<p><img src="11_images/bety_priors_1.png" /></p>
<p>Click on “View Related Priors” button and search through the list for desired prior distributions. The list can be filtered by adding terms into the search box. Add a prior to the PFT by clicking on the far left button for the desired prior, changing it to an X.</p>
<p><img src="11_images/bety_priors_2.png" /></p>
<p>Save this by scrolling to the bottom of the PFT page and hitting the Update button.</p>
<p><img src="11_images/bety_priors_3.png" /></p>
<div id="creating-new-prior-distributions" class="section level4">
<h4><span class="header-section-number">18.1.9.1</span> Creating new prior distributions</h4>
<p>A new prior distribution can be created for a pre-existing variable, if a more constrained or specific one is known.</p>
<ul>
<li>Select Data &gt; Priors then “New Prior”</li>
<li>In the <em>Citation</em> box, type in or select an existing reference that indicates how the prior was defined. There are a number of unpublished citations in current use that simply state the expert opinion of an individual</li>
<li>Fill the <em>Variable</em> box by typing in part or all of a pre-existing variable’s name and selecting it</li>
<li>The <em>Phylogeny</em> box allows one to specify what taxonomic grouping the prior is defined for, at it is important to note that this is just for reference and doesn’t have to be specified in any standard way nor does it have to be monophyletic (i.e. it can be a functional grouping)</li>
<li>The prior distribution is defined by choosing an option from the drop-down <em>Distribution</em> box, and then specifying values for both <em>Parameter a</em> and <em>Parameter b</em>. The exact meaning of the two parameters depends on the distribution chosen. For example, for the Normal distribution a and b are the mean and standard deviation while for the Uniform they are the minimum and maximum. All parameters are defined based on their standard parameterization in the R language</li>
<li>Specify the prior sample size in <em>N</em> if the prior is based on observed data (independent of data in the PEcAn database)</li>
<li>When this is done, scroll down and hit the Create button</li>
</ul>
<p><img src="11_images/bety_priors_4.png" /></p>
<p>The new prior distribution can then be added a PFT as described in the “Adding Priors for Each Variable” section.</p>
</div>
<div id="creating-new-variables" class="section level4">
<h4><span class="header-section-number">18.1.9.2</span> Creating new variables</h4>
<p>It is important to note that the priors are defined for the variable name and units as specified in the Variables table. <strong>If the variable name or units is different within the model it is the responsibility of write.configs.MODEL function to handle name and unit conversions</strong> (see Interface Modules below). This can also include common but nonlinear transformations, such as converting SLA to LMA or changing the reference temperature for respiration rates.</p>
<p>To add a new variable, select Data &gt; Variables and click the New Variable button. Fill in the <em>Name</em> field with the desired name for the variable and the units in the <em>Units</em> field. There are additional fields, such as <em>Standard Units</em>, <em>Notes</em>, and <em>Description</em>, that can be filled out if desired. When done, hit the Create button.</p>
<p><img src="11_images/bety_priors_5.png" /></p>
<p>The new variable can be used to create a prior distribution for it as in the “Creating new prior distributions” section.</p>
</div>
</div>
<div id="interface-modules" class="section level3">
<h3><span class="header-section-number">18.1.10</span> Interface Modules</h3>
<div id="setting-up-the-module-directory-required" class="section level4">
<h4><span class="header-section-number">18.1.10.1</span> Setting up the module directory (required)</h4>
<p>PEcAn assumes that the interface modules are available as an R package in the models directory named after the model in question. The simplest way to get started on that R package is to make a copy the <a href="https://github.com/PecanProject/pecan/tree/master/models/template"><em>template</em></a> directory in the pecan/models folder and re-name it to the name of your model. In the code, filenames, and examples below you will want to substitute the word <strong>MODEL</strong> for the name of your model (note: R is case-sensitive).</p>
<p>If you do not want to write the interface modules in R then it is fairly simple to set up the R functions describe below to just call the script you want to run using R’s <em>system</em> command. Scripts that are not R functions should be placed in the <em>inst</em> folder and R can look up the location of these files using the function <em>system.file</em> which takes as arguments the <em>local</em> path of the file within the package folder and the name of the package (typically PEcAn.MODEL). For example</p>
</div>
</div>
</div>
<div id="example-met-conversion-wrapper-function" class="section level2">
<h2><span class="header-section-number">18.2</span> Example met conversion wrapper function</h2>
<p>met2model.MODEL &lt;- function(in.path, in.prefix, outfolder, start_date, end_date){
myMetScript &lt;- system.file(“inst/met2model.MODEL.sh”, “PEcAn.MODEL”)
system(paste(myMetScript, file.path(in.path, in.prefix), outfolder, start_date, end_date))
}</p>
<p>would execute the following at the Linux command line</p>
<p>inst/met2model.MODEL.sh in.path/in.prefix outfolder start_date end_date `</p>
<div id="description" class="section level4">
<h4><span class="header-section-number">18.2.0.1</span> DESCRIPTION</h4>
<p>Within the module folder open the <em>DESCRIPTION</em> file and change the package name to PEcAn.MODEL. Fill out other fields such as Title, Author, Maintainer, and Date.</p>
</div>
<div id="namespace" class="section level4">
<h4><span class="header-section-number">18.2.0.2</span> NAMESPACE</h4>
<p>Open the <em>NAMESPACE</em> file and change all instances of MODEL to the name of your model. If you are not going to implement one of the optional modules (described below) at this time then you will want to comment those out using the pound sign <code>#</code>. For a complete description of R NAMESPACE files <a href="http://cran.r-project.org/doc/manuals/r-devel/R-exts.html#Package-namespaces">see here</a>. If you create additional functions in your R package that you want to be used make sure you include them in the NAMESPACE as well (internal functions don’t need to be declared)</p>
</div>
<div id="building-the-package" class="section level4">
<h4><span class="header-section-number">18.2.0.3</span> Building the package</h4>
<p>Once the package is defined you will then need to add it to the PEcAn build scripts. From the root of the pecan directory, go into the <em>scripts</em> folder and open the file <em>build.sh</em>. Within the section of code that includes PACKAGES= add model/MODEL to the list of packages to compile. If, in writing your module, you add any other R packages to the system you will want to make sure those are listed in the DESCRIPTION and in the script <strong>scripts/install.dependencies.R</strong>. Next, from the root pecan directory open all/DESCRIPTION and add your model package to the <em>Suggests:</em> list.</p>
<p>At any point, if you want to check if PEcAn can build your MODEL package successfully, just go to the linux command prompt and run <strong>scripts/build.sh</strong>. You will need to do this before the system can use these packages.</p>
</div>
<div id="write.config.model-required" class="section level4">
<h4><span class="header-section-number">18.2.0.4</span> write.config.MODEL (required)</h4>
<p>This module performs two primary tasks. The first is to take the list of parameter values and model input files that it receives as inputs and write those out in whatever format(s) the MODEL reads (e.g. a settings file). The second is to write out a shell script, jobs.sh, which, when run, will start your model run and convert its output to the PEcAn standard (netCDF with metadata currently equivalent to the <a href="http://nacp.ornl.gov/MsTMIP_variables.shtml">MsTMIP standard</a>). Within the MODEL directory take a close look at inst/template.job and the example write.config.MODEL to see an example of how this is done. It is important that this script writes or moves outputs to the correct location so that PEcAn can find them. The example function also shows an example of writing a model-specific settings/config file, also by using a template.</p>
<p>You are encouraged to read the section above on defining PFTs before writing write.config.MODEL so that you understand what model parameters PEcAn will be passing you, how they will be named, and what units they will be in. Also note that the (optional) PEcAn input/driver processing scripts are called by separate workflows, so the paths to any required inputs (e.g. meteorology) will already be in the model-specific format by the time write.config.MODEL receives that info.</p>
</div>
<div id="output-conversions" class="section level4">
<h4><span class="header-section-number">18.2.0.5</span> Output Conversions</h4>
<p>The module model2netcdf.MODEL converts model output into the PEcAn standard (netCDF with metadata currently equivalent to the <a href="http://nacp.ornl.gov/MsTMIP_variables.shtml">MsTMIP standard</a>). This function was previously required, but now that the conversion is called within jobs.sh it may be easier for you to convert outputs using other approaches (or to just directly write outputs in the standard).</p>
<p>Whether you implement this function or convert outputs some other way, please note that PEcAn expects all outputs to be broken up into ANNUAL files with the year number as the file name (i.e. YEAR.nc), though these files may contain any number of scalars, vectors, matrices, or arrays of model outputs, such as time-series of each output variable at the model’s native timestep.</p>
<p>Note: PEcAn reads all variable names from the files themselves so it is possible to add additional variables that are not part of the MsTMIP standard. Similarly, there are no REQUIRED output variables, though <em>time</em> is highly encouraged. We are shortly going establish a canonical list of PEcAn variables so that if users add additional output variables they become part of the standard. <strong>We don’t want two different models to call the same output with two different names or different units</strong> as this would prohibit the multi-model syntheses and comparisons that PEcAn is designed to facilitate.</p>
</div>
<div id="met2model.model" class="section level4">
<h4><span class="header-section-number">18.2.0.6</span> met2model.MODEL</h4>
<p><code>met2model.MODEL(in.path, in.prefix, outfolder, start_date, end_date)</code></p>
<p>Converts meteorology input files from the PEcAn standard (netCDF, CF metadata) to the format required by the model. This file is optional if you want to load all of your met files into the Inputs table as described in <a href="../developers_guide/How-to-insert-new-Input-data.html">How to insert new Input data</a>, which is often the easiest way to get up and running quickly. However, this function is required if you want to benefit from PEcAn’s meteorology workflows and model run cloning. You’ll want to take a close look at [Adding-an-Input-Converter] to see the exact variable names and units that PEcAn will be providing. Also note that PEcAn splits all meteorology up into ANNUAL files, with the year number explicitly included in the file name, and thus what PEcAn will actually be providing is <strong>in.path</strong>, the input path to the folder where multiple met files may stored, and <strong>in.prefix</strong>, the start of the filename that precedes the year (i.e. an individual file will be named <code>&lt;in.prefix&gt;.YEAR.nc</code>). It is valid for in.prefix to be blank. The additional REQUIRED arguments to met2model.MODEL are <strong>outfolder</strong>, the output folder where PEcAn wants you to write your meteorology, and <strong>start_date</strong> and <strong>end_date</strong>, the time range the user has asked the meteorology to be processed for.</p>
</div>
<div id="commit-changes" class="section level4">
<h4><span class="header-section-number">18.2.0.7</span> Commit changes</h4>
<p>Once the MODEL modules are written, you should follow the <a href="Using-Git.md">Using-Git</a> instructions on how to commit your changes to your local git repository, verify that PEcAn compiles using <em>scripts/build.sh</em>, push these changes to Github, and submit a pull request so that your model module is added to the PEcAn system. It is important to note that while we encourage users to make their models open, adding the PEcAn interface module to the Github repository in no way requires that the model code itself be made public. It does, however, allow anyone who already has a copy of the model code to use PEcAn so we strongly encourage that any new model modules be committed to Github.</p>
</div>
</div>
<div id="NewInput" class="section level2">
<h2><span class="header-section-number">18.3</span> Adding input data</h2>
<div id="input-records-in-bety" class="section level3">
<h3><span class="header-section-number">18.3.1</span> Input records in BETY</h3>
<p>All model input data or data used for model calibration/validation must be registered in the BETY database.</p>
<p>Before creating a new Input record, you must make sure that the format type of your data is registered in the database. If you need to make a new format record, see <a href="adding-to-pecan.html#NewFormat">Creating a new format record in BETY</a>.</p>
</div>
<div id="create-a-database-file-record-for-the-input-data" class="section level3">
<h3><span class="header-section-number">18.3.2</span> Create a database file record for the input data</h3>
<p>An input record contains all the metadata required to identify the data, however, this record does not include the location of the data file. Since the same data may be stored in multiple places, every file has its own dbfile record.</p>
<p>From your BETY interface:</p>
<ul>
<li>Create a DBFILES entry for the path to the file
<ul>
<li>From the menu click RUNS then FILES</li>
<li>Click “New File”</li>
<li>Select the machine your file is located at</li>
<li>Fill in the File Path where your file is located (aka folder or directory) NOT including the name of the file itself</li>
<li>Fill in the File Name with the name of the file itself. Note that some types of input records will refer to be ALL the files in a directory and thus File Name can be blank</li>
<li>Click Update</li>
</ul></li>
</ul>
</div>
<div id="creating-a-new-input-record-in-bety" class="section level3">
<h3><span class="header-section-number">18.3.3</span> Creating a new Input record in BETY</h3>
<p>From your BETY interface:</p>
<ul>
<li>Create an INPUT entry for your data
<ul>
<li>From the menu click RUNS then INPUTS</li>
<li>Click “New Input”</li>
<li>Select the SITE that this data is associated with the input data set</li>
<li>Other required fields are a unique name for the input, the start and end dates of the data set, and the format of the data. If the data is not in a currently known format you will need to create a NEW FORMAT and possibly a new input converter. Instructions on how to do add a converter can be found here <a href="adding-to-pecan.html#InputConversions">Input conversion</a>. Instructions on how to add a format record can be found <a href="adding-to-pecan.html#NewFormat">here</a></li>
<li>Parent ID is an optional variable to indicated that one dataset was derived from another.</li>
<li>Click “Create”</li>
</ul></li>
<li>Associate the DBFILE with the INPUT
<ul>
<li>In the RUNS -&gt; INPUTS table, search and find the input record you just created</li>
<li>Click on the EDIT icon</li>
<li>Select “View related Files”</li>
<li>In the Search window, search for the DBFILE you just created</li>
</ul></li>
<li>Once you have found the DBFILE, click on the “+” icon to add the file</li>
<li>Click on “Update” at the bottom when you are done.</li>
</ul>
</div>
<div id="InputConversions" class="section level3">
<h3><span class="header-section-number">18.3.4</span> Adding a new input converter</h3>
<p>Three Types of data conversions are discussed below: Meteorological data, Vegetation data, and Soil data. Each section provides instructions on how to convert data from their raw formats into a PEcAn standard format, whether it be from a database or if you have raw data in hand.</p>
<p>Also, see <a href="pecan-standards.html#pecan-standards">PEcAn standard formats</a>.</p>
<div id="meterological-data" class="section level4">
<h4><span class="header-section-number">18.3.4.1</span> Meterological Data</h4>
<div id="adding-a-function-to-pecan-to-convert-a-met-data-source" class="section level5">
<h5><span class="header-section-number">18.3.4.1.1</span> Adding a function to PEcAn to convert a met data source</h5>
<p>In general, you will need to write a function to download the raw met data and one to convert it to the PEcAn standard.</p>
<p>Downloading raw data function are named <code>download.&lt;source&gt;.R</code>. These functions are stored within the PEcAn directory: <a href="https://github.com/PecanProject/pecan/tree/develop/modules/data.atmosphere/R"><code>/modules/data.atmosphere/R</code></a>.</p>
<p>Conversion function from raw to standard are named <code>met2CF.&lt;source&gt;.R</code>. These functions are stored within the PEcAn directory: <a href="https://github.com/PecanProject/pecan/tree/develop/modules/data.atmosphere/R"><code>/modules/data.atmosphere/R</code></a>.</p>
<p>Current Meteorological products that are coupled to PEcAn can be found in our <a href="available-meteorological-drivers.html#available-meteorological-drivers">Available Meteorological Drivers</a> page.</p>
<p>Note: Unless you are also adding a new model, you will not need to write a script to convert from PEcAn standard to PEcAn models. Those conversion scripts are written when a model is added and can be found within each model’s PEcAn directory.</p>
<p><em>Standards dimesion, names, nad units can be found here:</em> <a href="pecan-standards.html#input-standards">Input Standards</a></p>
</div>
<div id="adding-single-site-specific-meteorological-data" class="section level5">
<h5><span class="header-section-number">18.3.4.1.2</span> Adding Single-Site Specific Meteorological Data</h5>
<p>Perhaps you have meteorological data specific to one site, with a unique format that you would like to add to PEcAn. Your steps would be to:
1. write a script or function to convert your files into the netcdf PEcAn standard
2. insert that file as an input record for your site following these <a href="adding-to-pecan.html#NewInput">instructions</a></p>
</div>
<div id="processing-met-data-outside-of-the-workflow-using-pecan-functions" class="section level5">
<h5><span class="header-section-number">18.3.4.1.3</span> Processing Met data outside of the workflow using PEcAn functions</h5>
<p>Perhaps you would like to obtain data from one of the sources coupled to PEcAn on its own. To do so you can run PEcAn functions on their own.</p>
<div id="example-1-processing-data-from-a-database" class="section level6">
<h6><span class="header-section-number">18.3.4.1.3.1</span> Example 1: Processing data from a database</h6>
<p>Download Amerifluxlbl from Niwot Ridge for the year 2004:</p>
<pre><code>raw.file &lt;-PEcAn.data.atmosphere::download.AmerifluxLBL(sitename = &quot;US-NR1&quot;, 
                                             outfolder = &quot;.&quot;, 
                                             start_date = &quot;2004-01-01&quot;, 
                                             end_date = &quot;2004-12-31&quot;)</code></pre>
<p>Using the information returned as the object <code>raw.file</code> you will then convert the raw files into a standard file.</p>
<p>Open a connection with BETY. You may need to change the host name depending on what machine you are hosting BETY. You can find the hostname listed in the machines table of BETY.</p>
<pre><code>
bety &lt;- dplyr::src_postgres(dbname   = &#39;bety&#39;, 
                            host =&#39;localhost&#39;, 
                            user     = &quot;bety&quot;, 
                            password = &quot;bety&quot;)
                            
con &lt;- bety$con</code></pre>
<p>Next you will set up the arguments for the function</p>
<pre><code>in.path &lt;- &#39;.&#39;
in.prefix &lt;- raw.file$dbfile.name
outfolder &lt;- &#39;.&#39;
format.id &lt;- 5000000002
format &lt;- PEcAn.DB::query.format.vars(format.id=format.id,bety = bety)
lon &lt;- -105.54
lat &lt;- 40.03
format$time_zone &lt;- &quot;America/Chicago&quot;</code></pre>
<p>Note: The format.id can be pulled from the BETY database if you know the format of the raw data.</p>
<p>Once these arguments are defined you can execute the <code>met2CF.csv</code> function</p>
<pre><code>PEcAn.data.atmosphere::met2CF.csv(in.path = in.path, 
                                  in.prefix =in.prefix,
                                  outfolder = &quot;.&quot;, 
                                  start_date =&quot;2004-01-01&quot;,
                                  end_date = &quot;2004-12-01&quot;,
                                  lat= lat,
                                  lon = lon,
                                  format = format) </code></pre>
</div>
<div id="example-2-processing-data-from-data-already-in-hand" class="section level6">
<h6><span class="header-section-number">18.3.4.1.3.2</span> Example 2: Processing data from data already in hand</h6>
<p>If you have Met data already in hand and you would like to convert into the PEcAn standard follow these instructions.</p>
<p>Update BETY with file record, format record and input record according to this page <a href="adding-to-pecan.html#NewInput">How to Insert new Input Data</a></p>
<p>If your data is in a csv format you can use the <code>met2CF.csv</code>function to convert your data into a PEcAn standard file.</p>
<p>Open a connection with BETY. You may need to change the host name depending on what machine you are hosting BETY. You can find the hostname listed in the machines table of BETY.</p>
<pre><code>bety &lt;- dplyr::src_postgres(dbname   = &#39;bety&#39;, 
                            host =&#39;localhost&#39;, 
                            user     = &quot;bety&quot;, 
                            password = &quot;bety&quot;)
                            
con &lt;- bety$con</code></pre>
<p>Prepare the arguments you need to execute the met2CF.csv function</p>
<pre><code>in.path &lt;- &#39;path/where/the/raw/file/lives&#39;
in.prefix &lt;- &#39;prefix_of_the_raw_file&#39;
outfolder &lt;- &#39;path/to/where/you/want/to/output/thecsv/&#39;
format.id &lt;- formatid of the format your created
format &lt;- PEcAn.DB::query.format.vars(format.id=format.id,bety = bety)
lon &lt;- longitude of your site
lat &lt;- latitude of your site
format$time_zone &lt;- time zone of your site
start_date &lt;- Start date of your data in &quot;y-m-d&quot;
end_date &lt;- End date of your data in &quot;y-m-d&quot;</code></pre>
<p>Next you can execute the function:</p>
<pre><code>PEcAn.data.atmosphere::met2CF.csv(in.path = in.path, 
                                  in.prefix =in.prefix, 
                                  outfolder = &quot;.&quot;, 
                                  start_date = start_date,
                                  end_date = end_date,
                                  lat= lat,
                                  lon = lon,
                                  format = format)</code></pre>
</div>
</div>
</div>
<div id="vegetation-data-1" class="section level4">
<h4><span class="header-section-number">18.3.4.2</span> Vegetation Data</h4>
<p>Vegetation data will be required to parameterize your model. In these examples we will go over how to produce a standard initial condition file.</p>
<p>The main function to process cohort data is the <code>ic.process.R</code> function. As of now however, if you require pool data you will run a separate function, <code>pool_ic_list2netcdf.R</code>.</p>
<div id="example-1-processing-veg-data-from-data-in-hand." class="section level6">
<h6><span class="header-section-number">18.3.4.2.0.1</span> Example 1: Processing Veg data from data in hand.</h6>
<p>In the following example we will process vegetation data that you have in hand using PEcAn.</p>
<p>First, you’ll need to create a input record in BETY that will have a file record and format record reflecting the location and format of your file. Instructions can be found in our <a href="adding-to-pecan.html#NewInput">How to Insert new Input Data</a> page.</p>
<p>Once you have created an input record you must take note of the input id of your record. An easy way to take note of this is in the URL of the BETY webpage that shows your input record. In this example we use an input record with the id <code>1000013064</code> which can be found at this url: <a href="https://psql-pecan.bu.edu/bety/inputs/1000013064#" class="uri">https://psql-pecan.bu.edu/bety/inputs/1000013064#</a> . Note that this is the Boston University BETY database. If you are on a different machine, your url will be different.</p>
<p>With the input id in hand you can now edit a pecan XML so that the PEcAn function <code>ic.process</code> will know where to look in order to process your data. The <code>inputs</code> section of your pecan XML will look like this. As of now ic.process is set up to work with the ED2 model so we will use ED2 settings and then grab the intermediary Rds data file that is created as the standard PEcAn file. For your Inputs section you will need to input your input id wherever you see the <code>useic</code> flag.</p>
<pre><code>&lt;inputs&gt;
      &lt;css&gt;
        &lt;source&gt;FFT&lt;/source&gt;
        &lt;output&gt;css&lt;/output&gt;
        &lt;username&gt;pecan&lt;/username&gt;
        &lt;id&gt;1000013064&lt;/id&gt;
        &lt;useic&gt;TRUE&lt;/useic&gt;
        &lt;metadata&gt;
          &lt;trk&gt;1&lt;/trk&gt;
          &lt;age&gt;70&lt;/age&gt;
          &lt;area&gt;400&lt;/area&gt;
        &lt;/metadata&gt;
      &lt;/css&gt;
      &lt;pss&gt;
        &lt;source&gt;FFT&lt;/source&gt;
        &lt;output&gt;pss&lt;/output&gt;
        &lt;username&gt;pecan&lt;/username&gt;
        &lt;id&gt;1000013064&lt;/id&gt;
        &lt;useic&gt;TRUE&lt;/useic&gt;
      &lt;/pss&gt;
      &lt;site&gt;
        &lt;source&gt;FFT&lt;/source&gt;
        &lt;output&gt;site&lt;/output&gt;
        &lt;username&gt;pecan&lt;/username&gt;
        &lt;id&gt;1000013064&lt;/id&gt;
        &lt;useic&gt;TRUE&lt;/useic&gt;
      &lt;/site&gt;
      &lt;met&gt;
        &lt;source&gt;CRUNCEP&lt;/source&gt;
        &lt;output&gt;ED2&lt;/output&gt;
      &lt;/met&gt;
      &lt;lu&gt;
        &lt;id&gt;294&lt;/id&gt;
      &lt;/lu&gt;
      &lt;soil&gt;
        &lt;id&gt;297&lt;/id&gt;
      &lt;/soil&gt;
      &lt;thsum&gt;
        &lt;id&gt;295&lt;/id&gt;
      &lt;/thsum&gt;
      &lt;veg&gt;
        &lt;id&gt;296&lt;/id&gt;
      &lt;/veg&gt;
    &lt;/inputs&gt;</code></pre>
<p>This IC workflow also supports generating ensembles of initial conditions from posterior estimates of DBH. To do this the tags below can be inserted to the pecan.xml:</p>
<pre><code>       &lt;css&gt;
        &lt;source&gt;PalEON&lt;/source&gt;
        &lt;output&gt;css&lt;/output&gt;
        &lt;id&gt;1000015682&lt;/id&gt;
        &lt;useic&gt;TRUE&lt;/useic&gt;
        &lt;ensemble&gt;20&lt;/ensemble&gt;
        &lt;metadata&gt;
          &lt;area&gt;1256.637&lt;/area&gt;
          &lt;n.patch&gt;3&lt;/n.patch&gt;
        &lt;/metadata&gt;
      &lt;/css&gt;</code></pre>
<p>Here the <code>id</code> should point to a file that has MCMC samples to generate the ensemble from. The number between the <code>&lt;ensemble&gt;</code> tag defines the number of ensembles requested. The workflow will populate the settings list <code>run$inputs</code> tag with ensemble member information. E.g.:</p>
<pre><code>  &lt;inputs&gt;
   &lt;css&gt;
    &lt;path1&gt;...&lt;/path1&gt;
    &lt;path2&gt;...&lt;/path2&gt;
    &lt;path3&gt;...&lt;/path3&gt;
    ...
    &lt;pathN&gt;...&lt;/pathN&gt;
   &lt;/css&gt;
   &lt;pss&gt;
    &lt;path&gt;
     &lt;path1&gt;...&lt;/path1&gt;
     &lt;path2&gt;...&lt;/path2&gt;
     &lt;path3&gt;...&lt;/path3&gt;
      ...
     &lt;pathN&gt;...&lt;/pathN&gt;
    &lt;/path&gt;
   &lt;/pss&gt;
   &lt;site&gt;
    &lt;path&gt;
     &lt;path1&gt;...&lt;/path1&gt;
     &lt;path2&gt;...&lt;/path2&gt;
     &lt;path3&gt;...&lt;/path3&gt;
      ...
     &lt;pathN&gt;...&lt;/pathN&gt;
    &lt;/path&gt;
   &lt;/site&gt;
   &lt;met&gt;...&lt;/met&gt;
   &lt;lu&gt;...&lt;/lu&gt;
   &lt;soil&gt;...&lt;/soil&gt;
   &lt;thsum&gt;...&lt;/thsum&gt;
   &lt;veg&gt;...&lt;/veg&gt;
  &lt;/inputs&gt;</code></pre>
<p>Once you edit your PEcAn.xml you can than create a settings object using PEcAn functions. Your <code>pecan.xml</code> must be in your working directory.</p>
<pre><code>settings &lt;- PEcAn.settings::read.settings(&quot;pecan.xml&quot;)
settings &lt;- PEcAn.settings::prepare.settings(settings, force=FALSE)</code></pre>
<p>You can then execute the <code>ic.process</code> function to convert data into a standard Rds file:</p>
<pre><code>input &lt;- settings$run$inputs
dir &lt;- &quot;.&quot;
ic.process(settings, input, dir, overwrite = FALSE)</code></pre>
<p>Note that the argument <code>dir</code> is set to the current directory. You will find the final ED2 file there. More importantly though you will find the <code>.Rds</code> file within the same directory.</p>
</div>
<div id="example-3-pool-initial-condition-files" class="section level6">
<h6><span class="header-section-number">18.3.4.2.0.2</span> Example 3 Pool Initial Condition files</h6>
<p>If you have pool vegetation data, you’ll need the <a href="https://github.com/PecanProject/pecan/blob/develop/modules/data.land/R/pool_ic_list2netcdf.R"><code>pool_ic_list2netcdf.R</code></a> function to convert the pool data into PEcAn
standard.</p>
<p>The function stands alone and requires that you provide a named list of netcdf dimensions and values, and a named list of variables and values. Names and units need to match the standard_vars.csv table found <a href="https://github.com/PecanProject/pecan/blob/develop/base/utils/data/standard_vars.csv">here</a>.</p>
<pre><code>#Create a list object with necessary dimensions for your site
input&lt;-list()
dims&lt;- list(lat=-115,lon=45, time= 1)
variables&lt;- list(SoilResp=8,TotLivBiom=295)
input$dims &lt;- dims
input$vals &lt;- variables</code></pre>
<p>Once this is done, set <code>outdir</code> to where you’d like the file to write out to and a siteid. Siteid in this can be used as an file name identifier. Once part of the automated workflow siteid will reflect the site id within the BET db.</p>
<pre><code>outdir  &lt;- &quot;.&quot;
siteid &lt;- 772
pool_ic_list2netcdf(input = input, outdir = outdir, siteid = siteid)</code></pre>
<p>You should now have a netcdf file with initial conditions.</p>
</div>
</div>
<div id="soil-data-1" class="section level4">
<h4><span class="header-section-number">18.3.4.3</span> Soil Data</h4>
<div id="example-1-converting-data-in-hand" class="section level6">
<h6><span class="header-section-number">18.3.4.3.0.1</span> Example 1: Converting Data in hand</h6>
<p>Local data that has the correct names and units can easily be written out in PEcAn standard using the function soil2netcdf.</p>
<pre><code>soil.data &lt;- list(volume_fraction_of_sand_in_soil = c(0.3,0.4,0.5),
                  volume_fraction_of_clay_in_soil = c(0.3,0.3,0.3),
                  soil_depth = c(0.2,0.5,1.0))
                         
soil2netcdf(soil.data,&quot;soil.nc&quot;)</code></pre>
<p>At the moment this file would need to be inserted into Inputs manually. By default, this function also calls soil_params, which will estimate a number of hydraulic and thermal parameters from texture. Be aware that at the moment not all model couplers are yet set up to read this file and/or convert it to model-specific formats.</p>
</div>
<div id="example-2-converting-paleon-data" class="section level6">
<h6><span class="header-section-number">18.3.4.3.0.2</span> Example 2: Converting PalEON data</h6>
<p>In addition to location-specific soil data, PEcAn can extract soil texture information from the PalEON regional soil product, which itself is a subset of the MsTMIP Unified North American Soil Map. If this product is installed on your machine, the appropriate step in the do_conversions workflow is enabled by adding the following tag under <code>&lt;inputs&gt;</code> in your pecan.xml</p>
<div class="sourceCode" id="cb195"><pre class="sourceCode xml"><code class="sourceCode xml"><a class="sourceLine" id="cb195-1" data-line-number="1">   <span class="kw">&lt;soil&gt;</span></a>
<a class="sourceLine" id="cb195-2" data-line-number="2">     <span class="kw">&lt;id&gt;</span>1000012896<span class="kw">&lt;/id&gt;</span></a>
<a class="sourceLine" id="cb195-3" data-line-number="3">   <span class="kw">&lt;/soil&gt;</span></a></code></pre></div>
<p>In the future we aim to extend this extraction to a wider range of soil products.</p>
</div>
<div id="example-3-extracting-soil-properties-from-gssurgo-database" class="section level6">
<h6><span class="header-section-number">18.3.4.3.0.3</span> Example 3: Extracting soil properties from gSSURGO database</h6>
<p>In addition to location-specific soil data, PEcAn can extract soil texture information from the gSSURGO data product. This product needs no installation and it extract soil proeprties for the lower 48 states in U.S. In order to let the pecan know that you’re planning to use gSSURGO, you can the following XML tag under input in your pecan xml file.</p>
<div class="sourceCode" id="cb196"><pre class="sourceCode xml"><code class="sourceCode xml"><a class="sourceLine" id="cb196-1" data-line-number="1"><span class="kw">&lt;inputs&gt;</span></a>
<a class="sourceLine" id="cb196-2" data-line-number="2">   <span class="kw">&lt;soil&gt;</span></a>
<a class="sourceLine" id="cb196-3" data-line-number="3">     <span class="kw">&lt;source&gt;</span>gSSURGO<span class="kw">&lt;/source&gt;</span></a>
<a class="sourceLine" id="cb196-4" data-line-number="4">   <span class="kw">&lt;/soil&gt;</span></a>
<a class="sourceLine" id="cb196-5" data-line-number="5"><span class="kw">&lt;/inputs&gt;</span></a></code></pre></div>
</div>
</div>
</div>
</div>
<div id="adding-data-web" class="section level2">
<h2><span class="header-section-number">18.4</span> Pecan Data Ingest via Web Interface</h2>
<p>This tutorial explains the process of ingesting data into PEcAn via our Data-Ingest Application. In order to ingest data, the users must first select data that they wish to upload. Then, they enter metadata to help PEcAn parse and load the data into the main PEcAn workflow.</p>
<div id="loading-data-1" class="section level3">
<h3><span class="header-section-number">18.4.1</span> Loading Data</h3>
<div id="selecting-ingest-method" class="section level4">
<h4><span class="header-section-number">18.4.1.1</span> Selecting Ingest Method</h4>
<p>The Data-Ingest application is capable of loading data from the DataONE data federation and from the user’s local machine. The first step in the workflow is therefore to select an upload method. The application defaults to uploading from DataONE. To upload data from a local device, simply select the radio button titled <code>Local Files</code>.</p>
</div>
<div id="dataone-upload-example" class="section level4">
<h4><span class="header-section-number">18.4.1.2</span> DataONE Upload Example</h4>
<p><br></p>
<p><img src="04_advanced_user_guide/02_adding_to_pecan/01_case_studies/images/data-ingest/D1Ingest-1.gif" width="50%" height="50%" style="display: block; margin: auto;" />
<br>
The DataONE download feature allows the user to download data at a given doi or DataONE specific package id. To do so, enter the doi or identifier in the <code>Import From DataONE</code> field and select <code>download</code>. The download process may take a couple of minutes to run depending on the number of files in the dataONE package. This may be a convenient option if the user does not wish to download files directly to their local machine. Once the files have been successfully downloaded from DataONE, they are displayed in a table. Before proceeding to the next step, the user can select a file to ingest by clicking on the corresponding row in the data table.
<br></p>
</div>
</div>
<div id="local-upload-example" class="section level3">
<h3><span class="header-section-number">18.4.2</span> Local Upload Example</h3>
<p><br>
To upload local files, the user should first select the <code>Local Files</code> button. From there, the user can upload files from their local machines by selecting <code>Browse</code> or by dragging and dropping files into the text box. The files will begin uploading automatically. From there, the user should select a file to ingest and then select the <code>Next Step</code> button.
<br>
After this step, the workflow is identical for both methods. However, please note that if it becomes necessary to switch from loading data via <code>DataONE</code> to uploading local files after the first step, please restart the application.
<br></p>
<p><img src="04_advanced_user_guide/02_adding_to_pecan/01_case_studies/images/data-ingest/Local_loader_sm.gif" width="50%" height="50%" style="display: block; margin: auto;" />
<br>
<img src="04_advanced_user_guide/02_adding_to_pecan/01_case_studies/images/data-ingest/local_browse.gif" width="50%" height="50%" style="display: block; margin: auto;" />
### 2. Creating an Input Record
Creating an input record requires some basic metadata about the file that is being ingested. Each entry field is briefly explained below.
<br></p>
<ul>
<li>Site: To link the selected file with a site, the user can scroll or type to search all the sites in PEcAn. See Example:
<br>
<img src="04_advanced_user_guide/02_adding_to_pecan/01_case_studies/images/data-ingest/Selectize_Input_sm.gif" width="50%" height="50%" style="display: block; margin: auto;" />
<br></li>
<li><p>Parent: To link the selected file with another dataset, type to search existing datasets in the <code>Parent</code> field.</p></li>
<li><p>Name: this field should be autofilled by selecting a file in step 1.</p></li>
<li><p>Format: If the selected file has an existing format name, the user can search and select in the <code>Format</code> field. If the selected file’s format is not already in pecan, the user can create a new format by selecting <code>Create New Format</code>. Once this new format is created, it will automatically populate the <code>Format</code> box and the <code>Current Mimetype</code> box (See Section 3).</p></li>
<li><p>Mimetype: If the format already exists, select an existing mimetype.</p></li>
<li><p>Start and End Date and Time: Inputs can be entered manually or by using the user interface. See example</p></li>
</ul>
<p><br>
<img src="04_advanced_user_guide/02_adding_to_pecan/01_case_studies/images/data-ingest/DateTime.gif" width="50%" height="50%" style="display: block; margin: auto;" /></p>
<ul>
<li>Notes: Describe the data that is being uploaded. Please include any citations or references.</li>
</ul>
</div>
<div id="creating-a-format-record" class="section level3">
<h3><span class="header-section-number">18.4.3</span> 3. Creating a format record</h3>
<p>If it is necessary to add a new format to PEcAn, the user should fill out the form attached to the <code>Create New Format</code> button. The inputs to this form are described below:</p>
<ul>
<li><p>Mimetype: type to search existing mimetypes. If the mimetype is not in that list, please click on the link <code>Create New Mimetype</code> and create a new mimetype via the BETY website.</p></li>
<li><p>New Format Name: Add the name of the new format. Please exclude spaces from the name. Instead please use underscores &quot;_&quot;.</p></li>
<li><p>Header: If there is space before the first line of data in the dataset, please select <code>Yes</code></p></li>
<li><p>Skip: The number of lines in the header that should be skipped before the data.</p></li>
<li><p>Please enter notes that describe the format.</p></li>
</ul>
<p>Example:
<br>
<img src="04_advanced_user_guide/02_adding_to_pecan/01_case_studies/images/data-ingest/new_format_record.gif" width="50%" height="50%" style="display: block; margin: auto;" />
### 4. Formats_Variables Record
The final step in the ingest process is to register a formats-variables record. This record links pecan variables with variables from the selected data.</p>
<ul>
<li><p>Variable: PEcAn variable that is equivalent to variable in selected file.</p></li>
<li><p>Name: The variable name in the imported data need only be specified if it differs from the BETY variable name.</p></li>
<li><p>Unit: Should be in a format parseable by the udunits library and need only be secified if the units of the data in the file differ from the BETY standard.</p></li>
<li><p>Storage Type: Storage type need only be specified if the variable is stored in a format other than would be expected (e.g. if numeric values are stored as quoted character strings). Additionally, storage_type stores POSIX codes that are used to store any time variables (e.g. a column with a 4-digit year would be <code>%Y</code>).</p></li>
<li><p>Column Number: Vector of integers that list the column numbers associated with variables in a dataset. Required for text files that lack headers.
<br>
<img src="04_advanced_user_guide/02_adding_to_pecan/01_case_studies/images/data-ingest/D1Ingest-9_sm.gif" width="50%" height="50%" style="display: block; margin: auto;" /></p></li>
</ul>
<p>Finally, the path to the ingest data is displayed in the <code>Select Files</code> box.</p>
</div>
</div>
<div id="NewFormat" class="section level2">
<h2><span class="header-section-number">18.5</span> Creating a new format</h2>
<div id="formats-in-bety" class="section level3">
<h3><span class="header-section-number">18.5.1</span> Formats in BETY</h3>
<p>The PEcAn database keeps track of all the input files passed to models, as well as any data used in model validation or data assimilation. Before we start to register these files with PEcAn we need to define the format these files will be in.</p>
<p>The main goal is to take all the meta-data we have about a data file and create a record of it that pecan can use as a guide when parsing the data file.</p>
<p>This information is stored in a Format record in the bety database. Make sure to read through the current Formats before deciding to make a new one.</p>
</div>
<div id="creating-a-new-format-in-bety" class="section level3">
<h3><span class="header-section-number">18.5.2</span> Creating a new format in BETY</h3>
<p>If the Format you are looking for is not available, you will need to create a new record. Before entering information into the database, you need to be able to answer the following questions about your data:</p>
<ul>
<li>What is the file MIME type?
<ul>
<li>We have a suit of functions for loading in data in open formats such as CSV, txt, netCDF, etc.</li>
<li>PEcAn has partnered with the <a href="http://browndog.ncsa.illinois.edu/">NCSA BrownDog project</a> to create a service that can read and convert as many data formats as possible. If your file type is less common or a proprietary type, you can use the <a href="http://dap.ncsa.illinois.edu/">BrownDog DAP</a> to convert it to a format that can be used with PEcAn.</li>
<li>If BrownDog cannot convert your data, you will need to contact us about writing a data specific load function.</li>
</ul></li>
<li>What variables does the file contain?
<ul>
<li>What are the variables named?</li>
<li>What are the variable units?</li>
<li>How do the variable names and units in the data map to PEcAn variables in the BETY database? See <a href="###%20Name%20and%20Unit">below</a> for an example. It is most likely that you will NOT need to add variables to BETY. However, identifying the appropriate variables matches in the database may require some work. We are always available to help answer your questions.</li>
</ul></li>
<li>Is there a timestamp on the data?
<ul>
<li>What are the units of time?</li>
</ul></li>
</ul>
<p>Here is an example using a fake dataset:</p>
<div class="figure">
<img src="04_advanced_user_guide/images/example_data.png" alt="example_data" />
<p class="caption">example_data</p>
</div>
<p>This data started out as an excel document, but was saved as a CSV file.</p>
<p>To create a Formats record for this data, in the web interface of BETY, select Runs &gt; Formats and click <em>New Format</em>.</p>
<p>You will need to fill out the following fields:</p>
<ul>
<li>MIME type: File type (you can search for other formats in the text field)</li>
<li>Name: The name of your format (this can be whatever you want)</li>
<li>Header: Boolean that denotes whether or not your data contains a header as the first line of the data. (1 = TRUE, 0 = FALSE)</li>
<li>Skip: The number of lines above the data that should be skipped. For example, metadata that should not be included when reading in the data or blank spaces.</li>
<li>Notes: Any additional information about the data such as sources and citations.</li>
</ul>
<p>Here is the Formats record for the example data:</p>
<p><img src="04_advanced_user_guide/images/format_record_1.png" alt="format_record_1" />
When you have finished this section, hit Create. The final record will be displayed on the screen.</p>
<div id="formats---variables" class="section level4">
<h4><span class="header-section-number">18.5.2.1</span> Formats -&gt; Variables</h4>
<p>After a Format entry has been created, you are encouraged to edit the entry to add relationships between the file’s variables and the Variables table in PEcAn. Not only do these relationships provide meta-data describing the file format, but they also allow PEcAn to search and (for some MIME types) read files.</p>
<p>To enter this data, select Edit Record and on the edit screen select View Related Variable.</p>
<p>Here is the record for the example data after adding related variables:</p>
<div class="figure">
<img src="04_advanced_user_guide/images/format_record_2.png" alt="format_record_2" />
<p class="caption">format_record_2</p>
</div>
<div id="name-and-unit" class="section level5">
<h5><span class="header-section-number">18.5.2.1.1</span> Name and Unit</h5>
<p>For each variable in the file you will want at a minimum to specify the NAME of the variable within your file and match that to the equivalent Variable in the pulldown.</p>
<p>Make sure to search for your variables under Data &gt; Variables before suggesting that we create a new variable record. This may not always be a straightforward process.</p>
<p>For example bety contains a record for Net Primary Productivity:</p>
<div class="figure">
<img src="04_advanced_user_guide/images/var_record.png" alt="var_record" />
<p class="caption">var_record</p>
</div>
<p>This record does not have the same variable name or the same units as NPP in the example data.
You may have to do some reading to confirm that they are the same variable.
In this case
- Both the data and the record are for Net Primary Productivity (the notes section provides additional resources for interpreting the variable.)
- The units of the data can be converted to those of the vairiable record (this can be checked by running <code>udunits2::ud.are.convertible(&quot;g C m-2 yr-1&quot;, &quot;Mg C ha-1 yr-1&quot;)</code>)</p>
<p>Differences between the data and the variable record can be accounted for in the data Formats record.</p>
<ul>
<li>Under Variable, select the variable as it is recorded in bety.</li>
<li>Under Name, write the name the variable has in your data file.</li>
<li>Under Unit, write the units the variable has in your data file.</li>
</ul>
<p>NOTE: All units must be written in a udunits compliant format. To check that your units can be read by udunits, in R, load the udunits2 package and run <code>udunits2::is.parseable(&quot;g C m-2 yr-1&quot;)</code></p>
<p><strong>If the name or the units are the same</strong>, you can leave the Name and Unit fields blank. This is can be seen with the variable LAI.</p>
</div>
<div id="storage-type" class="section level5">
<h5><span class="header-section-number">18.5.2.1.2</span> Storage Type</h5>
<p><em>Storage Type</em> only needs to be specified if the variable is stored in a format other than what would be expected (e.g. if numeric values are stored as quoted character strings).</p>
<p>One such example is <em>time variables</em>.</p>
<p>PEcAn converts all dates into POSIX format using R functions such as <code>strptime</code>. These functions require that the user specify the format in which the date is written.</p>
<p>The default is <code>&quot;%Y-%m-%d %H:%M:%S&quot;</code> which would look like <code>&quot;2017-01-01 00:00:00&quot;</code></p>
<p>A list of date formats can be found in the <a href="https://stat.ethz.ch/R-manual/R-devel/library/base/html/strptime.html">R documentation for the function <code>strptime</code></a></p>
<p>Below are some commonly used codes:</p>
<table>
<colgroup>
<col width="9%" />
<col width="90%" />
</colgroup>
<thead>
<tr class="header">
<th>%d</th>
<th>Day of the month as decimal number (01–31).</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>%D</td>
<td>Date format such as %m/%d/%y.</td>
</tr>
<tr class="even">
<td>%H</td>
<td>Hours as decimal number (00–23).</td>
</tr>
<tr class="odd">
<td>%m</td>
<td>Month as decimal number (01–12).</td>
</tr>
<tr class="even">
<td>%M</td>
<td>Minute as decimal number (00–59).</td>
</tr>
<tr class="odd">
<td>%S</td>
<td>Second as integer (00–61), allowing for up to two leap-seconds (but POSIX-compliant implementations will ignore leap seconds).</td>
</tr>
<tr class="even">
<td>%T</td>
<td>Equivalent to %H:%M:%S.</td>
</tr>
<tr class="odd">
<td>%y</td>
<td>Year without century (00–99). On input, values 00 to 68 are prefixed by 20 and 69 to 99 by 19 – that is the behaviour specified by the 2004 and 2008 POSIX standards, but they do also say ‘it is expected that in a future version the default century inferred from a 2-digit year will change’.</td>
</tr>
<tr class="even">
<td>%Y</td>
<td>Year with century.</td>
</tr>
</tbody>
</table>
</div>
<div id="column-number" class="section level5">
<h5><span class="header-section-number">18.5.2.1.3</span> Column Number</h5>
<p>If your data is in text format with variables in a standard order then you can specify the Column Number for the variable. This is required for text files that lack headers.</p>
</div>
</div>
<div id="retrieving-format-information" class="section level4">
<h4><span class="header-section-number">18.5.2.2</span> Retrieving Format Information</h4>
<p>To acquire Format information from a Format record, use the R function <code>query.format.vars</code></p>
<div id="inputs-3" class="section level5">
<h5><span class="header-section-number">18.5.2.2.1</span> Inputs</h5>
<ul>
<li><code>bety</code>: connection to BETY</li>
<li><code>input.id=NA</code> and/or <code>format.id=NA</code>: Input or Format record ID from BETY
<ul>
<li>At least one must be specified. Defaults to <code>format.id</code> if both provided.</li>
</ul></li>
<li><code>var.ids=NA</code>: optional vector of variable IDs. If provided, limits results to these variables.</li>
</ul>
</div>
<div id="output-1" class="section level5">
<h5><span class="header-section-number">18.5.2.2.2</span> Output</h5>
<ul>
<li>R list object containing many things. Fill this in.</li>
</ul>
</div>
</div>
</div>
</div>
<div id="NewBenchmark" class="section level2">
<h2><span class="header-section-number">18.6</span> Creating a new benchmark reference run</h2>
<p>The purpose of the reference run record in BETY is to store all the settings from a run that are necessary in exactly recreating it.</p>
<p>The pecan.xml file is the home of absolutely all the settings for a particular run in pecan. However, much of the information in the pecan.xml file is server and user specific and more importantly, the pecan.xml files are stored on individual servers and may not be available to the public.</p>
<p>When a run that is performed using pecan is registered as a reference run, the settings that were used to make that run are made available to all users through the database.</p>
<p>All completed runs are not automatically registered as reference runs. To register a run, navigate to the benchmarking section of the workflow visualizations Shiny app.</p>
</div>
<div id="editing-records" class="section level2">
<h2><span class="header-section-number">18.7</span> Editing records</h2>
<ul>
<li>Models</li>
<li>Species</li>
<li>PFTs</li>
<li>Traits</li>
<li>Inputs</li>
<li>DB files</li>
<li>Variables</li>
<li>Formats</li>
<li>(Link each section to relevant Bety tables)</li>
</ul>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="shiny.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="troubleshooting-and-debugging-pecan.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/tonygardella/pecan/edit/release/vtonydoc/book_source/03_topical_pages/11_adding_to_pecan.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
